var DWZ={keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{pageClear:"pageClear",resizeGrid:"resizeGrid"},isOverAxis:function(t,e,a){return e<t&&t<e+a},isOver:function(t,e,a,i,n,r){return this.isOverAxis(t,a,n)&&this.isOverAxis(e,i,r)},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{success:0,ok:200,error:300,timeout:301},ui:{sbar:!0},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:!1},msg:function(t,e){return function(t,e){e=e||[];for(var a=t||"",i=0;i<e.length;i++)a=a.replace(new RegExp("\\{"+i+"\\}","g"),e[i]);return a}(this._msg[t],e)},debug:function(t){this._set.debug&&("undefined"!=typeof console?console.log(t):alert(t))},loadLogin:function(){$.pdialog&&DWZ._set.loginTitle?$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:!0,width:520,height:260}):window.location=DWZ._set.loginUrl},obj2str:function(t){var e=[];if("string"==typeof t)return'"'+t.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';if("object"!=typeof t)return t.toString();if(t.sort){for(a=0;a<t.length;a++)e.push(DWZ.obj2str(t[a]));e="["+e.join()+"]"}else{for(var a in t)e.push(a+":"+DWZ.obj2str(t[a]));document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(t.toString)&&e.push("toString:"+t.toString.toString()),e="{"+e.join()+"}"}return e},jsonEval:function(data){try{return"string"==$.type(data)?eval("("+data+")"):data}catch(t){return{}}},ajaxError:function(t,e,a){alertMsg?alertMsg.error("<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+"</div><div>thrownError: "+a+"</div><div>"+t.responseText+"</div>"):alert("Http status: "+t.status+" "+t.statusText+"\najaxOptions: "+e+"\nthrownError:"+a+"\n"+t.responseText)},ajaxDone:function(t){var e;t.statusCode==DWZ.statusCode.error?t.message&&alertMsg?alertMsg.error(t.message):void 0!==t.msg&&alertMsg?alertMsg.error(t.msg):void 0!==t.msgid&&alertMsg&&(e=DWZ.msg(t.msgid),alertMsg.error(e)):t.statusCode==DWZ.statusCode.timeout?alertMsg?alertMsg.error(t.message||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin}):DWZ.loadLogin():t.message&&alertMsg?alertMsg.correct(t.message):t.msg&&alertMsg?alertMsg.correct(t.msg):t.msgid&&alertMsg&&(e=DWZ.msg(t.msgid),alertMsg.correct(e))},init:function(t,e){var a=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:!1,statusCode:{}},e);this._set.loginUrl=a.loginUrl,this._set.loginTitle=a.loginTitle,this._set.debug=a.debug,$.extend(DWZ.statusCode,a.statusCode),$.extend(DWZ.pageInfo,a.pageInfo),jQuery.ajax({type:"GET",url:t,dataType:"xml",timeout:9e4,cache:!1,success:function(t){$(t).find("_PAGE_").each(function(){var t=$(this).attr("id");t&&(DWZ.frag[t]=$(this).text())}),$(t).find("_MSG_").each(function(){var t=$(this).attr("id");t&&(DWZ._msg[t]=$(this).text())}),jQuery.isFunction(a.callback)&&a.callback()}});var i=$(document);i.isBind(DWZ.eventType.pageClear)||i.bind(DWZ.eventType.pageClear,function(t){})}};function Map(){this.elements=new Array,this.size=function(){return this.elements.length},this.isEmpty=function(){return this.elements.length<1},this.clear=function(){this.elements=new Array},this.put=function(t,e){this.remove(t),this.elements.push({key:t,value:e})},this.remove=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return this.elements.splice(i,1),!0}catch(t){return!1}return!1},this.get=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return this.elements[i].value}catch(t){return null}},this.element=function(t){return t<0||t>=this.elements.length?null:this.elements[t]},this.containsKey=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return!0}catch(t){return!1}return!1},this.values=function(){var t=new Array;for(i=0;i<this.elements.length;i++)t.push(this.elements[i].value);return t},this.keys=function(){var t=new Array;for(i=0;i<this.elements.length;i++)t.push(this.elements[i].key);return t}}function redrawChartsOnSwitchTab(){var t,e,a,i=navTab.getCurrentTabId();if(null!=i){if(i.match("showmachine_"))e="machine",t=i.split("_")[1],a="none"!=$("#dsmLeftMenu_"+t).css("display");else if(i.match("innersite_"))e="site",t=i.split("_")[1],a="none"!=$("#dsLeftMenu_"+t).css("display");else{if(!i.match("showview_"))return;e="view",t=i.split("_")[1],a="none"!=$("#dsLeftMenu_"+t).css("display")}dmtSetRedrawChartsInfo(t,e,a),dmtRedrawCharts()}}function redrawChartsMain(){$("#navMenuLast").hasClass("selected")&&(dcMainPageSetChartSize(),dcMainPageRedrawChart())}function redrawCharts(){var t=navTab.getCurrentTabId();null!=t?(t.match("showmachine_")||t.match("showview_")||t.match("innersite_"))&&dmtRedrawCharts():dcOnMainPage("main")}function initEnv(){if($("body").append(DWZ.frag.dwzFrag),$.browser.msie&&/6.0/.test(navigator.userAgent))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}$.browser.msie&&window.setInterval("CollectGarbage();",1e4),$(window).resize(function(){initLayout(),$(this).trigger(DWZ.eventType.resizeGrid),redrawCharts(),redrawChartsMain()}),$("#my_background,#my_progressBar").hide();var t=$("#background,#progressBar");t.hide(),$(document).ajaxStart(function(){t.show(),setTimeout(function(){"none"!=t.css("display")&&t.hide()},12e4)}).ajaxStop(function(){t.hide()}),$("#leftside").jBar({minW:150,maxW:700}),$.taskBar&&$.taskBar.init(),navTab.init(),$.fn.navMenu&&$("#navMenu").navMenu(),setTimeout(function(){initLayout(),initUI();var t=$("div.tabsPageHeader");t.find(".tabsLeft").hoverClass("tabsLeftHover"),t.find(".tabsRight").hoverClass("tabsRightHover"),t.find(".tabsMore").hoverClass("tabsMoreHover")},60)}function initLayout(){var t=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5,e=$(window).height()-$("#header").height()-34;$("#container").width(t),$("#container .tabsPageContent").height(e-34).find("[layoutH]").layoutH(),$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(e-5),$("#taskbar").css({top:e+$("#header").height()+5,width:$(window).width()})}function initUI(_box){var $p=$(_box||document);$("div.panel",$p).jPanel(),$("table.table",$p).jTable(),$("table.list",$p).cssTable(),$("div.tabs",$p).each(function(){var t=$(this),e={};e.currentIndex=t.attr("currentIndex")||0,e.eventType=t.attr("eventType")||"click",t.tabs(e)}),$("ul.tree",$p).jTree(),$("div.accordion",$p).each(function(){var t=$(this);t.accordion({fillSpace:t.attr("fillSpace"),alwaysOpen:!0,active:0})}),$(":button.checkboxCtrl, :checkbox.checkboxCtrl",$p).checkboxCtrl($p),$.fn.combox&&$("select.combox",$p).combox(),$("input[type=text], input[type=password], textarea",$p).addClass("textInput").focusClass("focus"),$("input[readonly], textarea[readonly]",$p).addClass("readonly"),$("input[disabled=true], textarea[disabled=true]",$p).addClass("disabled"),$("input[type=text]",$p).not("div.tabs input[type=text]",$p).filter("[alt]").inputAlert(),$("div.panelBar li, div.panelBar",$p).hoverClass("hover"),$("div.button",$p).hoverClass("buttonHover"),$("div.buttonActive",$p).hoverClass("buttonActiveHover"),$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",$p).hoverClass("hover"),$("form.required-validate",$p).each(function(){var t=$(this);t.validate({onsubmit:!1,focusInvalid:!1,focusCleanup:!0,errorElement:"span",ignore:".ignore",invalidHandler:function(t,e){var a,i=e.numberOfInvalids();i&&(a=DWZ.msg("validateFormError",[i]),alertMsg.error(a))}}),t.find("input[customvalid]").each(function(){var t=$(this);t.rules("add",{customvalid:t.attr("customvalid")})})}),$.fn.datepicker&&$("input.date",$p).each(function(){var t=$(this),e={};t.attr("dateFmt")&&(e.pattern=t.attr("dateFmt")),t.attr("minDate")&&(e.minDate=t.attr("minDate")),t.attr("maxDate")&&(e.maxDate=t.attr("maxDate")),t.attr("mmStep")&&(e.mmStep=t.attr("mmStep")),t.attr("ssStep")&&(e.ssStep=t.attr("ssStep")),t.datepicker(e)}),$("a[target=navTab]",$p).each(function(){$(this).click(function(event){var $this=$(this),title=$this.attr("title")||$this.text(),tabid=$this.attr("rel")||"_blank",fresh=eval($this.attr("fresh")||"true"),global=eval($this.attr("global_ajax")||"true"),external=eval($this.attr("external")||"false"),url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));if(DWZ.debug(url),!url.isFinishedTm())return alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1;navTab.openTab(tabid,url,{title:title,global:global,fresh:fresh,external:external}),event.preventDefault()})}),$("a[target=dialog]",$p).each(function(){$(this).click(function(event){var $this=$(this),title=$this.attr("title")||$this.text(),rel=$this.attr("rel")||"_blank",options={},w=$this.attr("width"),h=$this.attr("height");w&&(options.width=w),h&&(options.height=h),options.max=eval($this.attr("max")||"false"),options.mask=eval($this.attr("mask")||"false"),options.maxable=eval($this.attr("maxable")||"true"),options.minable=eval($this.attr("minable")||"true"),options.fresh=eval($this.attr("fresh")||"true"),options.resizable=eval($this.attr("resizable")||"true"),options.drawable=eval($this.attr("drawable")||"true"),options.close=eval($this.attr("close")||""),options.param=$this.attr("param")||"";var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));return DWZ.debug(url),url.isFinishedTm()?$.pdialog.open(url,rel,title,options):alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1})}),$("a[target=ajax]",$p).each(function(){$(this).click(function(t){var e,a=$(this),i=a.attr("rel");i&&(e=$("#"+i)).loadUrl(a.attr("href"),{},function(){e.find("[layoutH]").layoutH()}),t.preventDefault()})}),$("div.pagination",$p).each(function(){var t=$(this);t.pagination({targetType:t.attr("targetType"),rel:t.attr("rel"),totalCount:t.attr("totalCount"),numPerPage:t.attr("numPerPage"),pageNumShown:t.attr("pageNumShown"),currentPage:t.attr("currentPage")})}),$.fn.sortDrag&&$("div.sortDrag",$p).sortDrag(),$.fn.ajaxTodo&&$("a[target=ajaxTodo]",$p).ajaxTodo(),$.fn.dwzExport&&$("a[target=dwzExport]",$p).dwzExport(),$.fn.lookup&&$("a[lookupGroup]",$p).lookup(),$.fn.multLookup&&$("[multLookup]:button",$p).multLookup(),$.fn.suggest&&$("input[suggestFields]",$p).suggest(),$.fn.itemDetail&&$("table.itemDetail",$p).itemDetail(),$.fn.selectedTodo&&$("a[target=selectedTodo]",$p).selectedTodo(),$.fn.pagerForm&&$("form[rel=pagerForm]",$p).pagerForm({parentBox:$p})}!function(r){r.setRegional=function(t,e){r.regional||(r.regional={}),r.regional[t]=e},r.fn.extend({ajaxUrl:function(a){var i=r(this);i.trigger(DWZ.eventType.pageClear),void 0===a.global&&(a.global=!0),void 0===a.async&&(a.async=!0),r.ajax({type:a.type||"GET",url:a.url,data:a.data,cache:!1,async:a.async,global:a.global,success:function(t){var e=DWZ.jsonEval(t);e.statusCode==DWZ.statusCode.error?e.message?alertMsg.error(e.message):e.msg&&alertMsg&&alertMsg.error(e.msg):(i.html(t).initUI(),r.isFunction(a.callback)&&a.callback(t)),e.statusCode==DWZ.statusCode.timeout&&(r.pdialog&&r.pdialog.checkTimeout(),navTab&&navTab.checkTimeout(),alertMsg.error(e.message||DWZ.msg("sessionTimout"),{okCall:function(){DWZ.loadLogin()}}))},error:DWZ.ajaxError,statusCode:{503:function(t,e,a){alert(DWZ.msg("statusCode_503")||a)}}})},loadUrl:function(t,e,a){r(this).ajaxUrl({url:t,data:e,callback:a})},initUI:function(){return this.each(function(){r.isFunction(initUI)&&initUI(this)})},layoutH:function(n){return this.each(function(){var t=r(this),e=(n=n||t.parents("div.layoutBox:first")).height(),a=parseInt(t.attr("layoutH")),i=50<e-a?e-a:50;t.isTag("table")?t.removeAttr("layoutH").wrap('<div layoutH="'+a+'" style="overflow:auto;height:'+i+'px"></div>'):t.height(i).css("overflow","auto")})},hoverClass:function(t,a){var i=t||"hover";return this.each(function(){var t,e=r(this);e.hover(function(){t&&clearTimeout(t),e.addClass(i)},function(){t=setTimeout(function(){e.removeClass(i)},a||10)})})},focusClass:function(t){var e=t||"textInputFocus";return this.each(function(){r(this).focus(function(){r(this).addClass(e)}).blur(function(){r(this).removeClass(e)})})},inputAlert:function(){return this.each(function(){var t,a=r(this);function getAltBox(){return a.parent().find("label.alt")}function altBoxCss(t){var e=a.position();return{width:a.width(),top:e.top+"px",left:e.left+"px",opacity:t||1}}getAltBox().size()<1&&(a.attr("id")||a.attr("id",a.attr("name")+"_"+Math.round(1e4*Math.random())),(t=r('<label class="alt" for="'+a.attr("id")+'">'+a.attr("alt")+"</label>").appendTo(a.parent())).css(altBoxCss(1)),a.val()&&t.hide()),a.focus(function(){getAltBox().css(altBoxCss(.3))}).blur(function(){r(this).val()||getAltBox().show().css("opacity",1)}).keydown(function(){getAltBox().hide()})})},isTag:function(t){return!!t&&r(this)[0].tagName.toLowerCase()==t},isBind:function(t){var e=r(this).data("events");return e&&t&&e[t]},log:function(t){return this.each(function(){console&&console.log("%s: %o",t,this)})}}),r.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(t,e){return new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return 0<=e&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replaceTm:function(e){return e?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(t){return e[t.replace(/[{}]+/g,"")]}):this},replaceTmById:function(t){var a=t||r(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(t){var e=a.find("#"+t.replace(/[{}]+/g,""));return e.val()?e.val():t})},isFinishedTm:function(){return!new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var t=0;t<this.length;t+=1){var e=this.charAt(t);if(" "!=e&&"\n"!=e&&"\t"!=e&&"\r"!=e)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf("://"+document.domain)}})}(jQuery),function(){var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");function LZ(t){return(t<0||9<t?"":"0")+t}function formatDate(t,e){e+="";var a="",i=0,n="",r="",o=t.getYear()+"",s=t.getMonth()+1,l=t.getDate(),c=t.getDay(),d=t.getHours(),u=t.getMinutes(),h=t.getSeconds(),p={};for(o.length<4&&(o=""+(+o+1900)),p.y=""+o,p.yyyy=o,p.yy=o.substring(2,4),p.M=s,p.MM=LZ(s),p.MMM=MONTH_NAMES[s-1],p.NNN=MONTH_NAMES[s+11],p.d=l,p.dd=LZ(l),p.E=DAY_NAMES[c+7],p.EE=DAY_NAMES[c],p.H=d,p.HH=LZ(d),p.h=0==d?12:12<d?d-12:d,p.hh=LZ(p.h),p.K=11<d?d-12:d,p.k=d+1,p.KK=LZ(p.K),p.kk=LZ(p.k),p.a=11<d?"PM":"AM",p.m=u,p.mm=LZ(u),p.s=h,p.ss=LZ(h);i<e.length;){for(n=e.charAt(i),r="";e.charAt(i)==n&&i<e.length;)r+=e.charAt(i++);null!=p[r]?a+=p[r]:a+=r}return a}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,a,i){for(var n=i;a<=n;n--){var r=t.substring(e,e+n);if(r.length<a)return null;if(_isInteger(r))return r}return null}function parseDate(t,e){t+="",e+="";for(var a,i,n=0,r=0,o="",s="",l=new Date(1900,0,1),c=l.getYear(),d=l.getMonth()+1,u=1,h=l.getHours(),p=l.getMinutes(),f=l.getSeconds(),g="";r<e.length;){for(o=e.charAt(r),s="";e.charAt(r)==o&&r<e.length;)s+=e.charAt(r++);if("yyyy"==s||"yy"==s||"y"==s){if("yyyy"==s&&(i=a=4),"yy"==s&&(i=a=2),"y"==s&&(a=2,i=4),null==(c=_getInt(t,n,a,i)))return 0;n+=c.length,2==c.length&&(c=70<c?+c+1900:+c+2e3)}else if("MMM"==s||"NNN"==s){for(var v=d=0;v<MONTH_NAMES.length;v++){var m=MONTH_NAMES[v];if(t.substring(n,n+m.length).toLowerCase()==m.toLowerCase()&&("MMM"==s||"NNN"==s&&11<v)){12<(d=v+1)&&(d-=12),n+=m.length;break}}if(d<1||12<d)return 0}else if("EE"==s||"E"==s)for(v=0;v<DAY_NAMES.length;v++){var b=DAY_NAMES[v];if(t.substring(n,n+b.length).toLowerCase()==b.toLowerCase()){n+=b.length;break}}else if("MM"==s||"M"==s){if(null==(d=_getInt(t,n,s.length,2))||d<1||12<d)return 0;n+=d.length}else if("dd"==s||"d"==s){if(null==(u=_getInt(t,n,s.length,2))||u<1||31<u)return 0;n+=u.length}else if("hh"==s||"h"==s){if(null==(h=_getInt(t,n,s.length,2))||h<1||12<h)return 0;n+=h.length}else if("HH"==s||"H"==s){if(null==(h=_getInt(t,n,s.length,2))||h<0||23<h)return 0;n+=h.length}else if("KK"==s||"K"==s){if(null==(h=_getInt(t,n,s.length,2))||h<0||11<h)return 0;n+=h.length}else if("kk"==s||"k"==s){if(null==(h=_getInt(t,n,s.length,2))||h<1||24<h)return 0;n+=h.length,h--}else if("mm"==s||"m"==s){if(null==(p=_getInt(t,n,s.length,2))||p<0||59<p)return 0;n+=p.length}else if("ss"==s||"s"==s){if(null==(f=_getInt(t,n,s.length,2))||f<0||59<f)return 0;n+=f.length}else if("a"==s){if("am"==t.substring(n,n+2).toLowerCase())g="AM";else{if("pm"!=t.substring(n,n+2).toLowerCase())return 0;g="PM"}n+=2}else{if(t.substring(n,n+s.length)!=s)return 0;n+=s.length}}if(n!=t.length)return 0;if(2==d)if(c%4==0&&c%100!=0||c%400==0){if(29<u)return 0}else if(28<u)return 0;return(4==d||6==d||9==d||11==d)&&30<u?0:(h<12&&"PM"==g?h=+h+12:11<h&&"AM"==g&&(h-=12),new Date(c,d-1,u,h,p,f))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),a=this.getMonth()+1,i=this.getDate(),n=1900,r=0,o=1,s=replaceTmEval(t.replaceAll("%y",e).replaceAll("%M",a).replaceAll("%d",i)).split("-");return 0<s.length&&(n=s[0]),1<s.length&&(r=s[1]-1),2<s.length&&(o=s[2]),new Date(n,r,o).formatDate("yyyy-MM-dd")}}(),function($){$.validator&&($.validator.addMethod("numeric",function(t,e){return this.optional(e)||/^\d+$/.test(t)},"Numbers only please"),$.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers or underscores only please"),$.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),$.validator.addMethod("email",function(t,e){return this.optional(e)||/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t)},"Please specify a valid email"),$.validator.addMethod("phone",function(t,e){return this.optional(e)||/^1(3\d|5[0-35-9]|8[025-9]|47)\d{8}$/.test(t)},"Please specify a valid phone number"),$.validator.addMethod("postcode",function(t,e){return this.optional(e)||/^[0-9 A-Za-z]{5,20}$/.test(t)},"Please specify a valid postcode"),$.validator.addMethod("date",function(t,e){if(t=t.replace(/\s+/g,""),String.prototype.parseDate){var a=$(e),i=a.attr("dateFmt")||"yyyy-MM-dd";return!a.val()||a.val().parseDate(i)}return this.optional(e)||t.match(/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/)},"Please enter a valid date."),$.validator.addMethod("customvalid",function(value,element,params){try{return eval("("+params+")")}catch(t){return!1}},"Please fix this field."),$.validator.addClassRules({date:{date:!0},alphanumeric:{alphanumeric:!0},lettersonly:{lettersonly:!0},phone:{phone:!0},email:{email:!0},postcode:{postcode:!0}}),$.validator.setDefaults({errorElement:"span"}),$.validator.autoCreateRanges=!0)}(jQuery),function(o){o.fn.cssv=function(t){var e=o(this).css(t);return+e.substring(0,e.indexOf("px"))},o.fn.jBar=function(a){var r=o.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},a);return this.each(function(){var i=o(r.sideBar2,this),n=o(r.sideBar,this);o(r.toggleBut,n).click(function(){DWZ.ui.sbar=!1,o(r.splitBar).hide();var t=i.cssv("left")+i.outerWidth()-n.outerWidth(),e=o(r.container).cssv("left")-(n.outerWidth()-i.outerWidth()),a=n.outerWidth()-i.outerWidth()+o(r.container).outerWidth();return o(r.container).animate({left:e,width:a},50,function(){n.animate({left:t},500,function(){n.hide(),i.show().css("left",-50).animate({left:5},200),o(window).trigger(DWZ.eventType.resizeGrid)})}),redrawCharts(),o(r.collapse,i).click(function(){o(r.toggleBut,i).trigger("click")}),!1}),o(r.toggleBut,i).click(function(){if(!o("#navDocMenu").hasClass("selected"))return DWZ.ui.sbar=!0,i.animate({left:-25},200,function(){n.show()}),n.animate({left:5},800,function(){o(r.splitBar).show(),o(r.toggleBut,n).show();var t=5+n.outerWidth()+o(r.splitBar).outerWidth(),e=o(r.container).outerWidth()-(t-o(r.container).cssv("left"));o(r.container).css({left:t,width:e}),o(r.collapse,i).unbind("click"),o(window).trigger(DWZ.eventType.resizeGrid)}),redrawCharts(),!1}),o(r.splitBar).mousedown(function(e){o(r.splitBar2).each(function(){var t=o(this);return setTimeout(function(){t.show()},100),t.css({visibility:"visible",left:o(r.splitBar).css("left")}),t.jDrag(o.extend(a,{obj:o("#sidebar"),move:"horizontal",event:e,stop:function(){o(this).css("visibility","hidden");var t=o(this).cssv("left")-o(r.splitBar).cssv("left"),e=n.outerWidth()+t,a=o(r.container).cssv("left")+t,i=o(r.container).outerWidth()-t;n.css("width",e),o(r.splitBar).css("left",o(this).css("left")),o(r.container).css({left:a,width:i})}})),!1})})})}}(jQuery),function(o){o.fn.jDrag=function(a){return"string"==typeof a&&"destroy"==a?this.each(function(){o(this).unbind("mousedown",o.rwdrag.start),o.data(this,"pp-rwdrag",null)}):this.each(function(){var t,e=o(this);o.data(o.rwdrag,"pp-rwdrag",{options:o.extend({el:e,obj:e},a)}),a.event?o.rwdrag.start(a.event):(t=a.selector,o(t,obj).bind("mousedown",o.rwdrag.start))})},o.rwdrag={start:function(t){document.onselectstart=function(t){return!1};var e=o.data(this,"pp-rwdrag"),a=e.options.el[0];o.data(a,"pp-rwdrag",{options:e.options}),o.rwdrag.current||(o.rwdrag.current={el:a,oleft:parseInt(a.style.left)||0,otop:parseInt(a.style.top)||0,ox:t.pageX||t.screenX,oy:t.pageY||t.screenY},o(document).bind("mouseup",o.rwdrag.stop).bind("mousemove",o.rwdrag.drag))},drag:function(t){t=t||window.event;var e,a=o.rwdrag.current,i=o.data(a.el,"pp-rwdrag"),n=a.oleft+(t.pageX||t.clientX)-a.ox,r=a.otop+(t.pageY||t.clientY)-a.oy;return r<1&&(r=0),"horizontal"==i.options.move?(i.options.minW&&n>=o(i.options.obj).cssv("left")+i.options.minW&&i.options.maxW&&n<=o(i.options.obj).cssv("left")+i.options.maxW||i.options.scop&&(!i.options.relObj||n-parseInt(i.options.relObj.style.left)>i.options.cellMinW))&&(a.el.style.left=n+"px"):"vertical"==i.options.move?a.el.style.top=r+"px":n>=2*-(e=i.options.selector?o(i.options.selector,i.options.obj):o(i.options.obj)).outerWidth()/3&&0<=r&&n+e.outerWidth()/3<o(window).width()&&r+e.outerHeight()<o(window).height()&&(a.el.style.left=n+"px",a.el.style.top=r+"px"),i.options.drag&&i.options.drag.apply(a.el,[a.el]),o.rwdrag.preventEvent(t)},stop:function(t){var e=o.rwdrag.current,a=o.data(e.el,"pp-rwdrag");return o(document).unbind("mousemove",o.rwdrag.drag).unbind("mouseup",o.rwdrag.stop),a.options.stop&&a.options.stop.apply(e.el,[e.el]),o.rwdrag.current=null,document.onselectstart=function(t){return!0},o.rwdrag.preventEvent(t)},preventEvent:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}}(jQuery),function($){$.extend($.fn,{jTree:function(options){var op=$.extend({checkFn:null,selected:"selected",exp:"expandable",coll:"collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",folderExp:"folder_expandable",folderColl:"folder_collapsable",endExp:"end_expandable",endColl:"end_collapsable",file:"file",ck:"checked",unck:"unchecked"},options);return this.each(function(){var $this=$(this),cnum=$this.children().length;$(">li",$this).each(function(){var t=$(this),e=!t.prev()[0],a=!t.next()[0];t.genTree({icon:$this.hasClass("treeFolder"),ckbox:$this.hasClass("treeCheck"),options:op,level:0,exp:1<cnum?e?op.firstExp:a?op.lastExp:op.exp:op.endExp,coll:1<cnum?e?op.firstColl:a?op.lastColl:op.coll:op.endColl,showSub:!$this.hasClass("collapse")&&($this.hasClass("expand")||!(1<cnum)||e),isLast:!(1<cnum)||a})}),setTimeout(function(){var checkFn;$this.hasClass("treeCheck")&&(checkFn=eval($this.attr("oncheck")),checkFn&&$.isFunction(checkFn)&&$("div.ckbox",$this).each(function(){var n=$(this);n.click(function(){var t=$(n).hasClass("checked"),e=[],a=$(n).parent().parent(),i=$("input",a);1<i.size()?$(i).each(function(){e[e.length]={name:$(this).attr("name"),value:$(this).val(),text:$(this).attr("text")}}):e={name:i.attr("name"),value:i.val(),text:i.attr("text")},checkFn({checked:t,items:e})})})),$("a",$this).click(function(t){$("div."+op.selected,$this).removeClass(op.selected);var e=$(this).parent().addClass(op.selected),a=$(this).parents("li:first"),i=a.attr("target");if(i&&(0==$("#"+i,$this).size()&&$this.prepend('<input id="'+i+'" type="hidden" />'),$("#"+i,$this).val(a.attr("rel"))),$(".ckbox",e).trigger("click"),t.stopPropagation(),$(document).trigger("click"),!$(this).attr("target"))return!1})},1)})},subTree:function(a,i){return this.each(function(){$(">li",this).each(function(){var t=$(this),e=!t.next()[0];t.genTree({icon:a.icon,ckbox:a.ckbox,exp:e?a.options.lastExp:a.options.exp,coll:e?a.options.lastColl:a.options.coll,options:a.options,level:i,space:e?null:a.space,showSub:a.showSub,isLast:e})})})},genTree:function(t){var n=$.extend({icon:t.icon,ckbox:t.ckbox,exp:"",coll:"",showSub:!1,level:0,options:null,isLast:!1},t);return this.each(function(){var a=$(this),i=$(">ul",a),t=a.parent().prev(),e="unchecked";n.ckbox&&0<$(">.checked",t).size()&&(e="checked"),0<i.size()?(a.children(":first").wrap("<div></div>"),$(">div",a).prepend("<div class='"+(n.showSub?n.coll:n.exp)+"'></div>"+(n.ckbox?"<div class='ckbox "+e+"'></div>":"")+(n.icon?"<div class='"+(n.showSub?n.options.folderColl:n.options.folderExp)+"'></div>":"")),n.showSub?i.show():i.hide(),$(">div>div:first,>div>a",a).click(function(){$(">li:first",i).children(":first").isTag("a")&&i.subTree(n,n.level+1);var t=(e=$(this)).isTag("a"),e=t?$(">div>div",a).eq(n.level):e;return t&&!i.is(":hidden")||(e.toggleClass(n.exp).toggleClass(n.coll),n.icon&&$(">div>div:last",a).toggleClass(n.options.folderExp).toggleClass(n.options.folderColl)),i.is(":hidden")?i.slideDown("fast"):t||i.slideUp("fast"),!1}),addSpace(n.level,a),n.showSub&&i.subTree(n,n.level+1)):(a.children().wrap("<div></div>"),$(">div",a).prepend("<div class='node'></div>"+(n.ckbox?"<div class='ckbox "+e+"'></div>":"")+(n.icon?"<div class='file'></div>":"")),addSpace(n.level,a),n.isLast&&$(a).addClass("last")),n.ckbox&&a._check(n),$(">div",a).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")}),$.browser.msie&&$(">div",a).click(function(){return $("a",this).trigger("click"),!1})});function addSpace(t,e){if(0<t){var a=e.parent().parent(),i="<div class='"+(a.next()[0]?"line":"indent")+"'></div>";if(1<t){for(var n=$(">div>div",a).filter(":first"),r="";1<t;)r=r+"<div class='"+n.attr("class")+"'></div>",n=n.next(),t--;i=r+i}$(">div",e).prepend(i)}}},_check:function(t){var i=$(this),n=$(">div>.ckbox",i),e=i.find("a"),a=e.attr("tname"),r=e.attr("tvalue"),o="text='"+e.text()+"' ";a&&(o+="name='"+a+"' "),r&&(o+="value='"+r+"' "),n.append("<input type='checkbox' style='display:none;' "+o+"/>").click(function(){var t=n.hasClass("checked"),e=t?"unchecked":"checked",a=t?"checked":"unchecked";return n.removeClass(a).removeClass(t?"":"indeterminate").addClass(e),$("input",n).attr("checked",!t),$(">ul",i).find("li").each(function(){$("div.ckbox",this).removeClass(a).removeClass(t?"":"indeterminate").addClass(e).find("input").attr("checked",!t)}),$(i)._checkParent(),!1}),e.attr("checked")&&(n.find("input").attr("checked",!0),n.removeClass("unchecked").addClass("checked"),$(i)._checkParent())},_checkParent:function(){var t,e,a,i,n,r,o;$(this).parent().hasClass("tree")||(t=$(this).parent().parent(),a=(e=$(">ul",t)).find(">li>a").size()+e.find("div.ckbox").size(),n=(i=e.find("div.checked").size())==a?"checked":0!=i?"indeterminate":"unchecked",r=i!=a&&0!=i?"checked":"indeterminate",$(">div>.ckbox",t).removeClass("unchecked").removeClass("checked").removeClass(r).addClass(n),o=$(":checkbox",t),"checked"==n?o.attr("checked","checked"):o.removeAttr("checked"),t._checkParent())}})}(jQuery),function(l){var r=new Map;function completed(t){var e;l.data(this,"dwz-accordion")&&((e=l.data(this,"dwz-accordion").options).running=t?0:--e.running,e.running||(e.clearStyle&&e.toShow.add(e.toHide).css({height:"",overflow:""}),l(this).triggerHandler("change.dwz-accordion",[e.data],e.change)))}function fillSpace(t){var e,a,i,n=r.get(t);n&&(e=l(n).parent(),a=e.height()-l(".accordionHeader",n).size()*l(".accordionHeader:first-child",n).outerHeight()-2,i=e.children().not(n),l.each(i,function(t){a-=l(i[t]).outerHeight()}),l(".accordionContent",n).height(a))}function toggle(t,e,a,i,n){var r=l.data(this,"dwz-accordion").options;r.toShow=t,r.toHide=e,r.data=a;var o=function scopeCallback(t,e){return function(){return t.apply(e,arguments)}}(completed,this);r.running=0==e.size()?t.size():e.size(),r.animated?!r.alwaysOpen&&i?l.dwz.accordion.animations[r.animated]({toShow:jQuery([]),toHide:e,complete:o,down:n,autoheight:r.autoheight}):l.dwz.accordion.animations[r.animated]({toShow:t,toHide:e,complete:o,down:n,autoheight:r.autoheight}):(!r.alwaysOpen&&i?t.toggle():(e.hide(),t.show()),o(!0))}function clickHandler(t){var e=l.data(this,"dwz-accordion").options;if(e.disabled)return!1;if(!t.target&&!e.alwaysOpen){e.active.find("h2").toggleClass(e.selectedClass);var a=e.active.next(),i={instance:this,options:e,newHeader:jQuery([]),oldHeader:e.active,newContent:jQuery([]),oldContent:a},n=e.active=l([]);return toggle.call(this,n,a,i),!1}var r=l(t.target);if(r.parents(e.header).length)for(;!r.is(e.header);)r=r.parent();var o=r[0]==e.active[0];if(e.running||e.alwaysOpen&&o)return!1;if(r.is(e.header)){e.active.find("h2").toggleClass(e.selectedClass),o||r.find("h2").addClass(e.selectedClass);var n=r.next(),a=e.active.next(),i={instance:this,options:e,newHeader:r,oldHeader:e.active,newContent:n,oldContent:a},s=e.headers.index(e.active[0])>e.headers.index(r[0]);return e.active=o?l([]):r,toggle.call(this,n,a,i,o,s),!1}}function findActive(t,e){return null!=e?"number"==typeof e?t.filter(":eq("+e+")"):t.not(t.not(e)):!1===e?l([]):t.filter(":eq(0)")}l.dwz=l.dwz||{},l(window).resize(function(){setTimeout(function(){for(var t=0;t<r.size();t++)fillSpace(r.element(t).key)},100)}),l.fn.extend({accordion:function(e,t){var a=Array.prototype.slice.call(arguments,1);return this.each(function(){var t;e.fillSpace&&r.put(e.fillSpace,this),"string"==typeof e?(t=l.data(this,"dwz-accordion"))[e].apply(t,a):l(this).is(".dwz-accordion")||l.data(this,"dwz-accordion",new l.dwz.accordion(this,e))})},activate:function(t){return this.accordion("activate",t)}}),l.dwz.accordion=function(t,e){var a,i;this.options=e=l.extend({},l.dwz.accordion.defaults,e),this.element=t,l(t).addClass("dwz-accordion"),!e.navigation||(a=l(t).find("a").filter(e.navigationFilter)).length&&(a.filter(e.header).length?e.active=a:(e.active=a.parent().parent().prev(),a.addClass("current"))),e.headers=l(t).find(e.header),e.active=findActive(e.headers,e.active),e.fillSpace?fillSpace(e.fillSpace):e.autoheight&&(i=0,e.headers.next().each(function(){i=Math.max(i,l(this).outerHeight())}).height(i)),e.headers.not(e.active||"").next().hide(),e.active.find("h2").addClass(e.selectedClass),e.event&&l(t).bind(e.event+".dwz-accordion",clickHandler)},l.dwz.accordion.prototype={activate:function(t){clickHandler.call(this.element,{target:findActive(this.options.headers,t)[0]})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.options.headers.next().css("display",""),(this.options.fillSpace||this.options.autoheight)&&this.options.headers.next().css("height",""),l.removeData(this.element,"dwz-accordion"),l(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}},l.extend(l.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:!0,animated:"slide",event:"click",header:".accordionHeader",autoheight:!0,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(a,t){var i,n;(a=l.extend({easing:"swing",duration:300},a,t)).toHide.size()?(i=a.toHide.height(),n=a.toShow.height()/i,a.toShow.css({height:0}).show(),a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate({height:"hide"},{step:function(t){var e=(i-t)*n;(l.browser.msie||l.browser.opera)&&(e=Math.ceil(e)),a.toShow.height(e)},duration:a.duration,easing:a.easing,complete:function(){a.autoheight||a.toShow.css({height:"auto"}),a.toShow.css({overflow:"auto"}),a.complete()}})):a.toShow.animate({height:"show"},a)},bounceslide:function(t){this.slide(t,{easing:t.down?"bounceout":"swing",duration:t.down?1e3:200})},easeslide:function(t){this.slide(t,{easing:"easeinout",duration:700})}}})}(jQuery),function(i){i.fn.extend({theme:function(t){var a=i.extend({themeBase:"themes"},t).themeBase+"/#theme#/style.css";return this.each(function(){function Hf(t){i("head").find("link[href$='style.css']").attr("href",a.replace("#theme#",t)),e.find(">div").removeClass("selected"),e.filter("[theme="+t+"]").find(">div").addClass("selected"),i.isFunction(i.cookie)&&i.cookie("dwz_theme",t)}var t,e=i(this).find(">li[theme]");e.each(function(t){var e=i(this),a=e.attr("theme");e.addClass(a).click(function(){Hf(a)})}),!i.isFunction(i.cookie)||(t=i.cookie("dwz_theme"))&&Hf(t)})}})}(jQuery),function(n){n.fn.navMenu=function(){return this.each(function(){var i=n(this);i.find("li>a").click(function(){var a=n(this);return n.post(a.attr("href"),{},function(t){n("#sidebar").find(".accordion").remove().end().append(t).initUI(),i.find("li").removeClass("selected"),a.parent().addClass("selected"),n("#navDocMenu").hasClass("selected")||0!=DWZ.ui.sbar||n("#sidebar_s .toggleCollapse div").trigger("click"),navTab.closeAllTab();var e=n("#sidebar").find("ul li:first").find("a");null!=e&&(e.click(),n("#sidebar").find("ul li:first").find("div:first").addClass("selected"))}),!1})})}}(jQuery),$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(t){return $.regional.alertMsg.title[t]},_keydownOk:function(t){return t.keyCode==DWZ.keyCode.ENTER&&t.data.target.trigger("click"),!1},_keydownEsc:function(t){t.keyCode==DWZ.keyCode.ESC&&t.data.target.trigger("click")},_open:function(t,e,a){$(this._boxId).remove();var i="";if(a)for(var n=0;n<a.length;n++){var r=a[n].call?"callback":"";i+=DWZ.frag.alertButFrag.replace("#butMsg#",a[n].name).replace("#callback#",r)}var o=DWZ.frag.alertBoxFrag.replace("#type#",t).replace("#title#",this._getTitle(t)).replace("#message#",e).replace("#butFragment#",i);$(o).appendTo("body").css({top:-$(this._boxId).height()+"px"}).animate({top:"0px"},500),this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),this._types.info==t||this._types.correct==t?this._closeTimer=setTimeout(function(){alertMsg.close()},3500):$(this._bgId).show(),$('<input type="text" style="width:0;height:0;" name="_alertFocusCtr"/>').appendTo(this._boxId).focus().hide();for(var s=$(this._boxId).find("a.button"),l=s.filter("[rel=callback]"),c=$(document),n=0;n<a.length;n++)a[n].call&&l.eq(n).click(a[n].call),a[n].keyCode==DWZ.keyCode.ENTER&&c.bind("keydown",{target:s.eq(n)},this._keydownOk),a[n].keyCode==DWZ.keyCode.ESC&&c.bind("keydown",{target:s.eq(n)},this._keydownEsc)},close:function(){$(document).unbind("keydown",this._keydownOk).unbind("keydown",this._keydownEsc),$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()}),$(this._bgId).hide()},error:function(t,e){this._alert(this._types.error,t,e)},info:function(t,e){this._alert(this._types.info,t,e)},warn:function(t,e){this._alert(this._types.warn,t,e)},correct:function(t,e){this._alert(this._types.correct,t,e)},_alert:function(t,e,a){var i={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(i,a);var n=[{name:i.okName,call:i.okCall,keyCode:DWZ.keyCode.ENTER}];this._open(t,e,n)},confirm:function(t,e){var a={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(a,e);var i=[{name:a.okName,call:a.okCall,keyCode:DWZ.keyCode.ENTER},{name:a.cancelName,call:a.cancelCall,keyCode:DWZ.keyCode.ESC}];this._open(this._types.confirm,t,i)}};!function(l){var c,d,u;function hide(){c.hide(),d.hide()}l.fn.extend({contextMenu:function(t,e){var a=l.extend({shadow:!0,bindings:{},ctrSub:null},e);c=c||l('<div id="contextmenu"></div>').appendTo("body").hide(),d=d||l('<div id="contextmenuShadow"></div>').appendTo("body").hide(),(u=u||[]).push({id:t,shadow:a.shadow,bindings:a.bindings||{},ctrSub:a.ctrSub});var i=u.length-1;return l(this).bind("contextmenu",function(t){return"function"==typeof a.callback&&a.callback(l(this),a),function display(t,a,e,i){var n=u[t],r=l(DWZ.frag[n.id]);r.find("li").hoverClass(),c.html(r),l.each(n.bindings,function(t,e){l("[rel='"+t+"']",c).bind("click",function(t){hide(),e(l(a),l("#"+n.id))})});var o=e.pageX,s=e.pageY;l(window).width()<o+c.width()&&(o-=c.width());l(window).height()<s+c.height()&&(s-=c.height());c.css({left:o,top:s}).show(),n.shadow&&d.css({width:c.width(),height:c.height(),left:o+3,top:s+3}).show();l(document).one("click",hide),l.isFunction(n.ctrSub)&&n.ctrSub(l(a),l("#"+n.id))}(i,this,t),!1}),this}})}(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"main",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(t){$.History&&$.History.init("#container");var e=this;$.extend(this._op,t),this.componentBox=$("#"+this._op.id),this._tabBox=this.componentBox.find(this._op.stTabBox),this._panelBox=this.componentBox.find(this._op.stPanelBox),this._prevBut=this.componentBox.find("."+this._op.prevClass),this._nextBut=this.componentBox.find("."+this._op.nextClass),this._moreBut=this.componentBox.find(this._op.stMore),this._moreBox=this.componentBox.find(this._op.stMoreLi),this._prevBut.click(function(t){e._scrollPrev()}),this._nextBut.click(function(t){e._scrollNext()}),this._moreBut.click(function(){return e._moreBox.show(),!1}),$(document).click(function(){e._moreBox.hide()}),this._contextmenu(this._tabBox),this._contextmenu(this._getTabs()),this._init(),this._ctrlScrollBut()},_init:function(){var a=this;this._getTabs().each(function(e){$(this).unbind("click").click(function(t){a._switchTab(e)}),$(this).find(navTab._op.close$).unbind("click").click(function(){a._closeTab(e)})}),this._getMoreLi().each(function(e){$(this).find(">a").unbind("click").click(function(t){a._switchTab(e)})}),this._switchTab(this._currentIndex)},_contextmenu:function(t){var s=this;t.contextMenu("navTabCM",{bindings:{reload:function(t,e){s._reload(t,!0)},closeCurrent:function(t,e){var a=t.attr("tabid");a?s.closeTab(a):s.closeCurrentTab()},closeOther:function(t,e){var a=s._indexTabId(t.attr("tabid"));s._closeOtherTab(0<a?a:s._currentIndex)},closeAll:function(t,e){s.closeAllTab()}},ctrSub:function(t,e){var a=e.find("[rel='reload']"),i=e.find("[rel='closeCurrent']"),n=e.find("[rel='closeOther']"),r=e.find("[rel='closeAll']"),o=s._getTabs();o.size()<2&&(i.addClass("disabled"),n.addClass("disabled"),r.addClass("disabled")),0==s._currentIndex||t.attr("tabid")==s._op.mainTabId?(i.addClass("disabled"),a.addClass("disabled")):2==o.size()&&n.addClass("disabled")}})},_getTabs:function(){return this._tabBox.find("> li")},_getPanels:function(){return this._panelBox.find("> div")},_getMoreLi:function(){return this._moreBox.find("> li")},_getTab:function(t){var e=this._indexTabId(t);if(0<=e)return this._getTabs().eq(e)},getPanel:function(t){var e=this._indexTabId(t);if(0<=e)return this._getPanels().eq(e)},_getTabsW:function(t,e){return this._tabsW(this._getTabs().slice(t,e))},_tabsW:function(t){var e=0;return t.each(function(){e+=$(this).outerWidth(!0)}),e},_indexTabId:function(e){if(!e)return-1;var a=-1;return this._getTabs().each(function(t){$(this).attr("tabid")!=e||(a=t)}),a},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){for(var t=this._getLeft(),e=0,a=this._getTabs(),i=0;i<a.size();i++){if(0<=e+t)return i;e+=a.eq(i).outerWidth(!0)}return 0},_visibleEnd:function(){for(var t=this._getLeft(),e=0,a=this._getTabs(),i=0;i<a.size();i++)if((e+=a.eq(i).outerWidth(!0))+t>this._getScrollBarW())return i;return a.size()},_scrollPrev:function(){var t=this._visibleStart();0<t&&this._scrollTab(-this._getTabsW(0,t-1))},_scrollNext:function(){var t=this._visibleEnd();t<this._getTabs().size()&&this._scrollTab(-this._getTabsW(0,t+1)+this._getScrollBarW())},_scrollTab:function(t,e){var a=this;this._tabBox.animate({left:t+"px"},200,function(){a._ctrlScrollBut()})},_scrollCurrent:function(){var t=this._tabsW(this._getTabs());t<=this._getScrollBarW()?this._scrollTab(0):this._getLeft()<this._getScrollBarW()-t?this._scrollTab(this._getScrollBarW()-t):this._currentIndex<this._visibleStart()?this._scrollTab(-this._getTabsW(0,this._currentIndex)):this._currentIndex>=this._visibleEnd()&&this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(!0)-this._getTabsW(0,this._currentIndex))},_ctrlScrollBut:function(){var t=this._tabsW(this._getTabs());this._getScrollBarW()>t?(this._prevBut.hide(),this._nextBut.hide(),this._tabBox.parent().removeClass("tabsPageHeaderMargin")):(this._prevBut.show().removeClass("tabsLeftDisabled"),this._nextBut.show().removeClass("tabsRightDisabled"),this._tabBox.parent().addClass("tabsPageHeaderMargin"),0<=this._getLeft()?this._prevBut.addClass("tabsLeftDisabled"):this._getLeft()<=this._getScrollBarW()-t&&this._nextBut.addClass("tabsRightDisabled"))},_switchTab:function(t){var e=this._getTabs().removeClass("selected").eq(t).addClass("selected");this._getPanels().hide().eq(t).show(),this._getMoreLi().removeClass("selected").eq(t).addClass("selected"),this._currentIndex=t,this._scrollCurrent(),this._reload(e),0==t&&"function"==typeof dcOnMainPage&&dcOnMainPage(0),redrawChartsOnSwitchTab()},_closeTab:function(t,e){var a;this._getTabs().eq(t).remove(),this._getPanels().eq(t).trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().eq(t).remove(),this._currentIndex>=t&&this._currentIndex--,!e||0<(a=this._indexTabId(e))&&(this._currentIndex=a),this._init(),this._scrollCurrent(),this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(t){var e=this._indexTabId(t);0<e&&this._closeTab(e)},getCurrentTabId:function(){return 0<this._currentIndex?this._getTabs().eq(this._currentIndex).attr("tabid"):null},closeCurrentTab:function(t){0<this._currentIndex&&this._closeTab(this._currentIndex,t)},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove(),this._getPanels().filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().filter(":gt(0)").remove(),this._currentIndex=0,this._init(),this._scrollCurrent()},_closeOtherTab:function(t){var e;0<(t=t||this._currentIndex)?(e=":eq("+t+")",this._getTabs().not(e).filter(":gt(0)").remove(),this._getPanels().not(e).filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().not(e).filter(":gt(0)").remove(),this._currentIndex=1,this._init(),this._scrollCurrent()):this.closeAllTab()},_loadUrlCallback:function(t){t.find("[layoutH]").layoutH(),t.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(t,e){e=e||t.data("reloadFlag");var a,i,n,r=t.attr("url");e&&r&&(t.data("reloadFlag",null),a=this.getPanel(t.attr("tabid")),t.hasClass("external")?navTab.openExternal(r,a):(n=0<(i=$("#pagerForm",a)).size()?i.serializeArray():{},a.loadUrl(r,n,function(){navTab._loadUrlCallback(a)})))},reloadFlag:function(t){var e=this._getTab(t);e&&(this._indexTabId(t)==this._currentIndex?this._reload(e,!0):e.data("reloadFlag",1))},reload:function(t,e){var a,i=$.extend({data:{},navTabId:"",callback:null},e),n=i.navTabId?this._getTab(i.navTabId):this._getTabs().eq(this._currentIndex),r=i.navTabId?this.getPanel(i.navTabId):this._getPanels().eq(this._currentIndex);r&&(t=t||n.attr("url"))&&(n.hasClass("external")?navTab.openExternal(t,r):($.isEmptyObject(i.data)&&(a=$("#pagerForm",r),i.data=0<a.size()?a.serializeArray():{}),r.ajaxUrl({type:"POST",url:t,data:i.data,callback:function(t){navTab._loadUrlCallback(r),$.isFunction(i.callback)&&i.callback(t)}})))},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var t=DWZ.jsonEval(this.getCurrentPanel().html());t&&t.statusCode==DWZ.statusCode.timeout&&this.closeCurrentTab()},openExternal:function(t,e){var a=navTab._panelBox.height();e.html(DWZ.frag.externalFrag.replaceAll("{url}",t).replaceAll("{height}",a+"px"))},openTab:function(t,e,a){var i,n,r,o,s=$.extend({title:"New Tab",data:{},fresh:!0,external:!1,global:!0,async:!0},a),l=this._indexTabId(t);0<=l?(i=(r=this._getTabs().eq(l)).attr("tabid")==this._op.mainTabId?"> span > span":"> span",r.find(">a").attr("title",s.title).find(i).text(s.title),o=this._getPanels().eq(l),!s.fresh&&r.attr("url")==e||(r.attr("url",e),s.external||e.isExternalUrl()?(r.addClass("external"),navTab.openExternal(e,o)):(r.removeClass("external"),o.ajaxUrl({type:"GET",url:e,data:s.data,global:s.global,async:s.async,callback:function(){navTab._loadUrlCallback(o)}}))),this._currentIndex=l):(this._tabBox.append('<li tabid="#tabid#"><a href="javascript:" title="#title#" class="#tabid#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>'.replaceAll("#tabid#",t).replaceAll("#title#",s.title)),this._panelBox.append('<div class="page unitBox"></div>'),this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",s.title)),r=(n=this._getTabs()).filter(":last"),o=this._getPanels().filter(":last"),s.external||e.isExternalUrl()?(r.addClass("external"),navTab.openExternal(e,o)):(r.removeClass("external"),o.ajaxUrl({type:"GET",url:e,global:s.global,data:s.data,async:s.async,callback:function(){navTab._loadUrlCallback(o)}})),$.History&&setTimeout(function(){$.History.addHistory(t,function(t){var e=navTab._indexTabId(t);0<=e&&navTab._switchTab(e)},t)},10),this._currentIndex=n.size()-1,this._contextmenu(n.filter(":last").hoverClass("hover"))),this._init(),this._scrollCurrent(),this._getTabs().eq(this._currentIndex).attr("url",e)}};function noValidateCallback(t,e,a,i){var n=$(t);void 0===i&&(i=!0);function Mo(){$.ajax({type:t.method||"POST",url:n.attr("action"),data:n.serializeArray(),dataType:"json",global:i,cache:!1,success:function(t){dmtFirstDealAjaxResponse(t)||r(t)},error:DWZ.ajaxError})}var r=e||DWZ.ajaxDone;return a?alertMsg.confirm(a,{okCall:Mo}):Mo(),!1}function validateCallback(t,e,a,i){var n=$(t);if(!n.valid())return!1;void 0===i&&(i=!1);function To(){$.ajax({type:t.method||"POST",url:n.attr("action"),data:n.serializeArray(),dataType:"json",global:i,cache:!1,success:e||DWZ.ajaxDone,error:DWZ.ajaxError})}return a?alertMsg.confirm(a,{okCall:To}):To(),!1}function iframeCallback(t,e){var a=$(t),i=$("#callbackframe");if(!a.valid())return!1;0==i.size()&&(i=$("<iframe id='callbackframe' name='callbackframe' src='about:blank' style='display:none'></iframe>").appendTo("body")),t.ajax||a.append('<input type="hidden" name="ajax" value="1" />'),t.target="callbackframe",_iframeResponse(i[0],e||DWZ.ajaxDone)}function _iframeResponse(i,n){var r=$(i),o=$(document);o.trigger("ajaxStart"),r.bind("load",function(t){if(r.unbind("load"),o.trigger("ajaxStop"),"javascript:'%3Chtml%3E%3C/html%3E';"!=i.src&&"javascript:'<html></html>';"!=i.src){var e,a=i.contentDocument||i.document;if(!(a.readyState&&"complete"!=a.readyState||a.body&&"false"==a.body.innerHTML)){if(a.XMLDocument)e=a.XMLDocument;else if(a.body)try{e=r.contents().find("body").text(),e=jQuery.parseJSON(e)}catch(t){e=a.body.innerHTML}else e=a;n(e)}}})}function navTabAjaxDone(t){var e;DWZ.ajaxDone(t),dmtFirstDealAjaxResponse(t)||t.statusCode==DWZ.statusCode.ok&&(t.navTabId?navTab.reloadFlag(t.navTabId):navTabPageBreak(0<(e=$("#pagerForm",navTab.getCurrentPanel())).size()?e.serializeArray():{},t.rel),"closeCurrent"==t.callbackType?setTimeout(function(){navTab.closeCurrentTab(t.navTabId)},100):"forward"==t.callbackType?navTab.reload(t.forwardUrl):"forwardConfirm"==t.callbackType?alertMsg.confirm(t.confirmMsg||DWZ.msg("forwardConfirmMsg"),{okCall:function(){navTab.reload(t.forwardUrl)}}):navTab.getCurrentPanel().find(":input[initValue]").each(function(){var t=$(this).attr("initValue");$(this).val(t)}))}function dialogAjaxDone(t){var e;DWZ.ajaxDone(t),dmtFirstDealAjaxResponse(t)||(t.statusCode==DWZ.statusCode.ok?(t.navTabId?navTab.reload(t.forwardUrl,{navTabId:t.navTabId}):t.rel&&navTabPageBreak(0<(e=$("#pagerForm",navTab.getCurrentPanel())).size()?e.serializeArray():{},t.rel),"closeCurrent"==t.callbackType&&$.pdialog.closeCurrent()):$.pdialog.closeCurrent())}function navTabSearch(t,e){var a=$(t);return t[DWZ.pageInfo.pageNum]&&(t[DWZ.pageInfo.pageNum].value=1),navTab.reload(a.attr("action"),{data:a.serializeArray(),navTabId:e}),!1}function dialogSearch(t){var e=$(t);return t[DWZ.pageInfo.pageNum]&&(t[DWZ.pageInfo.pageNum].value=1),$.pdialog.reload(e.attr("action"),{data:e.serializeArray()}),!1}function dwzSearch(t,e){return("dialog"==e?dialogSearch:navTabSearch)(t),!1}function divSearch(t,e,a){var i,n=$(t);return t[DWZ.pageInfo.pageNum]&&(t[DWZ.pageInfo.pageNum].value=1),e&&(i=$("#"+e)).ajaxUrl({type:"POST",url:n.attr("action"),data:n.serializeArray(),callback:function(){i.find("[layoutH]").layoutH(),$.isFunction(a)&&a()}}),!1}function _getPagerForm(t,e){var a=$("#pagerForm",t).get(0);return a&&(e.pageNum&&(a[DWZ.pageInfo.pageNum].value=e.pageNum),e.numPerPage&&(a[DWZ.pageInfo.numPerPage].value=e.numPerPage),e.orderField&&(a[DWZ.pageInfo.orderField].value=e.orderField),e.orderDirection&&a[DWZ.pageInfo.orderDirection]&&(a[DWZ.pageInfo.orderDirection].value=e.orderDirection)),a}function dwzPageBreak(t){var e=$.extend({targetType:"navTab",rel:"",data:{pageNum:"",numPerPage:"",orderField:"",orderDirection:""},callback:null},t),a="dialog"==e.targetType?$.pdialog.getCurrent():navTab.getCurrentPanel();if(e.rel){var i=a.find("#"+e.rel);(n=_getPagerForm(i,e.data))&&i.ajaxUrl({type:"POST",url:$(n).attr("action"),data:$(n).serializeArray(),callback:function(){i.find("[layoutH]").layoutH()}})}else{if("function"==typeof e.targetType)return void e.targetType(e.data);var n=_getPagerForm(a,e.data),r=$(n).serializeArray();"dialog"==e.targetType?n&&$.pdialog.reload($(n).attr("action"),{data:r,callback:e.callback}):n&&navTab.reload($(n).attr("action"),{data:r,callback:e.callback})}}function navTabPageBreak(t,e){dwzPageBreak({targetType:"navTab",rel:e,data:t})}function dialogPageBreak(t,e){dwzPageBreak({targetType:"dialog",rel:e,data:t})}function ajaxTodoPost(url,data,callback){var $callback=callback||navTabAjaxDone;$.isFunction($callback)||($callback=eval("("+callback+")")),$.ajax({type:"post",url:url,data:data,dataType:"json",cache:!1,global:null==data.global||data.global,success:$callback,error:DWZ.ajaxError,timeout:function(){DWZ.msg("sessionTimout")}})}function ajaxTodoType(url,callback,reqType,dateType){var $callback=callback||navTabAjaxDone;$.isFunction($callback)||($callback=eval("("+callback+")")),$.ajax({type:reqType||"GET",url:url,dataType:dateType||"json",cache:!1,global:!1,success:$callback,error:DWZ.ajaxError})}function ajaxTodo(url,callback){var $callback=callback||navTabAjaxDone;$.isFunction($callback)||($callback=eval("("+callback+")")),$.ajax({type:"POST",url:url,dataType:"json",cache:!1,global:!1,success:$callback,error:DWZ.ajaxError})}function FrankCalendar(t){this.config={mode:"",lang:"zh-CN",debug:!1},this._container=null,this._errorTip="",this._init(t),this.visibility=this._container.style.visibility,this.highlighted=!1}!function(c){c.fn.extend({tabs:function(t){var l=c.extend({reverse:!1,eventType:"click",currentIndex:0,stTabHeader:"> .tabsHeader",stTab:">.tabsHeaderContent>ul",stTabPanel:"> .tabsContent",ajaxClass:"j-ajax",closeClass:"close",prevClass:"tabsLeft",nextClass:"tabsRight"},t);return this.each(function(){!function initTab(e){var t=e.add(c("> *",e));var a=c(l.stTabHeader,t);var i=c(l.stTab+" li",a);var n=c(l.stTabPanel+" > *",t);i.unbind().find("a").unbind();a.find("."+l.prevClass).unbind();a.find("."+l.nextClass).unbind();i.each(function(a){l.currentIndex==a?c(this).addClass("selected"):c(this).removeClass("selected"),"hover"==l.eventType?c(this).hover(function(t){switchTab(e,a)}):c(this).click(function(t){switchTab(e,a)}),c("a",this).each(function(){c(this).hasClass(l.ajaxClass)?c(this).click(function(t){var e=n.eq(a);this.href&&!e.attr("loaded")&&e.loadUrl(this.href,{},function(){e.find("[layoutH]").layoutH(),e.attr("loaded",!0)}),t.preventDefault()}):c(this).hasClass(l.closeClass)&&c(this).click(function(t){return i.eq(a).remove(),n.eq(a).remove(),a==l.currentIndex?l.currentIndex=a+1<i.size()?a:a-1:a<l.currentIndex&&(l.currentIndex=a),initTab(e),!1})})});switchTab(e,l.currentIndex)}(c(this))});function switchTab(t,e){var a=t.add(c("> *",t)),i=c(l.stTabHeader,a),n=c(l.stTab+" li",i),r=c(l.stTabPanel+" > *",a),o=n.eq(e),s=r.eq(e);l.reverse&&o.hasClass("selected")?(n.removeClass("selected"),r.hide()):(l.currentIndex=e,n.removeClass("selected"),o.addClass("selected"),r.hide().eq(l.currentIndex).show()),s.attr("inited")||s.attr("inited",1e3).find("input[type=text]").filter("[alt]").inputAlert()}}})}(jQuery),function(l){l.fn.extend({jresize:function(t){return"string"==typeof t&&"destroy"==t?this.each(function(){l("div[class^='resizable']",this).each(function(){l(this).hide()})}):this.each(function(){var a=l(this),i=l(".resizable");l("div[class^='resizable']",a).each(function(){var e=this;l(e).mousedown(function(t){return l.pdialog.switchDialog(a),l.resizeTool.start(i,a,t,l(e).attr("tar")),!1}).show()})})}}),l.resizeTool={start:function(t,e,a,i){l.pdialog.initResize(t,e,i),l.data(t[0],"layer-drag",{options:l.extend(l.pdialog._op,{target:i,dialog:e,stop:l.resizeTool.stop})}),l.layerdrag.start(t[0],a,l.pdialog._op)},stop:function(){var t=l.data(arguments[0],"layer-drag");l.pdialog.resizeDialog(arguments[0],t.options.dialog,t.options.target),l("body").css("cursor",""),l(arguments[0]).hide()}},l.layerdrag={start:function(t,e,a){return l.layerdrag.current||(l.layerdrag.current={el:t,oleft:parseInt(t.style.left)||0,owidth:parseInt(t.style.width)||0,otop:parseInt(t.style.top)||0,oheight:parseInt(t.style.height)||0,ox:e.pageX||e.screenX,oy:e.pageY||e.clientY},l(document).bind("mouseup",l.layerdrag.stop),l(document).bind("mousemove",l.layerdrag.drag)),l.layerdrag.preventEvent(e)},drag:function(t){t=t||window.event;var e=l.layerdrag.current,a=l.data(e.el,"layer-drag"),i=(t.pageX||t.screenX)-e.ox,n=(t.pageY||t.clientY)-e.oy;if((t.pageY||t.clientY)<=0||(t.pageY||t.clientY)>=l(window).height()-l(".dialogHeader",l(a.options.dialog)).outerHeight())return!1;var r=a.options.target,o=e.owidth,s=e.oheight;return"n"!=r&&"s"!=r&&(o+=0<=r.indexOf("w")?-i:i),o>=l.pdialog._op.minW&&(0<=r.indexOf("w")&&(e.el.style.left=e.oleft+i+"px"),"n"!=r&&"s"!=r&&(e.el.style.width=o+"px")),"w"!=r&&"e"!=r&&(s+=0<=r.indexOf("n")?-n:n),s>=l.pdialog._op.minH&&(0<=r.indexOf("n")&&(e.el.style.top=e.otop+n+"px"),"w"!=r&&"e"!=r&&(e.el.style.height=s+"px")),l.layerdrag.preventEvent(t)},stop:function(t){var e=l.layerdrag.current,a=l.data(e.el,"layer-drag");return l(document).unbind("mousemove",l.layerdrag.drag),l(document).unbind("mouseup",l.layerdrag.stop),a.options.stop&&a.options.stop.apply(e.el,[e.el]),l.layerdrag.current=null,l.layerdrag.preventEvent(t)},preventEvent:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}}(jQuery),function(l){l.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!0},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(t,e){var a,i=l.extend({data:{},dialogId:"",callback:null},e),n=i.dialogId&&l("body").data(i.dialogId)||this._current;n&&(a=n.find(".dialogContent")).ajaxUrl({type:"POST",url:t,data:i.data,callback:function(t){a.find("[layoutH]").layoutH(a),l(".pageContent",n).width(l(n).width()-14),l(":button.close",n).click(function(){return l.pdialog.close(n),!1}),l.isFunction(i.callback)&&i.callback(t)}})},openLocal:function(t,e,a,i){var n,r=l.extend({},l.pdialog._op,i),o=l("body").data(e);o?o.is(":hidden")&&o.show():(l("body").append(DWZ.frag.dialogFrag),(o=l(">.dialog:last-child","body")).data("id",e),i.close&&o.data("close",i.close),i.param&&o.data("param",i.param),l.fn.bgiframe&&o.bgiframe(),o.find(".dialogHeader").find("h1").html(a),l(o).css("zIndex",l.pdialog._zIndex+=2),l("div.shadow").css("zIndex",l.pdialog._zIndex-3).show(),l.pdialog._init(o,i),l(o).click(function(){l.pdialog.switchDialog(o)}),r.resizable&&o.jresize(),r.drawable&&o.dialogDrag(),l("a.close",o).click(function(t){return l.pdialog.close(o),!1}),r.maxable?l("a.maximize",o).show().click(function(t){return l.pdialog.switchDialog(o),l.pdialog.maxsize(o),o.jresize("destroy").dialogDrag("destroy"),!1}):l("a.maximize",o).hide(),l("a.restore",o).click(function(t){return l.pdialog.restore(o),o.jresize().dialogDrag(),!1}),r.minable?l("a.minimize",o).show().click(function(t){return l.pdialog.minimize(o),!1}):l("a.minimize",o).hide(),l("div.dialogHeader a",o).mousedown(function(){return!1}),l("div.dialogHeader",o).dblclick(function(){l("a.restore",o).is(":hidden")?l("a.maximize",o).trigger("click"):l("a.restore",o).trigger("click")}),r.max&&(l.pdialog.maxsize(o),o.jresize("destroy").dialogDrag("destroy")),l("body").data(e,o),l.pdialog._current=o,l.pdialog.attachShadow(o),(n=l(".dialogContent",o)).html(l("#"+t).html()),n.find("[layoutH]").layoutH(n),l(".pageContent",o).width(l(o).width()-14),l("button.close").click(function(){return l.pdialog.close(o),!1})),r.mask?(l(o).css("zIndex",1e3),l("a.minimize",o).hide(),l(o).data("mask",!0),l("#dialogBackground").show()):r.minable&&l.taskBar.addDialog(e,a)},open:function(t,e,a,i){var n,r=l.extend({},l.pdialog._op,i),o=l("body").data(e);o?(o.is(":hidden")&&o.show(),!r.fresh&&t==l(o).data("url")||(o.data("url",t),o.find(".dialogHeader").find("h1").html(a),this.switchDialog(o),(n=o.find(".dialogContent")).loadUrl(t,{},function(){n.find("[layoutH]").layoutH(n),l(".pageContent",o).width(l(o).width()-14),l("button.close").click(function(){return l.pdialog.close(o),!1})}))):(l("body").append(DWZ.frag.dialogFrag),(o=l(">.dialog:last-child","body")).data("id",e),o.data("url",t),i.close&&o.data("close",i.close),i.param&&o.data("param",i.param),l.fn.bgiframe&&o.bgiframe(),o.find(".dialogHeader").find("h1").html(a),l(o).css("zIndex",l.pdialog._zIndex+=2),l("div.shadow").css("zIndex",l.pdialog._zIndex-3).show().attr("id",e+"_shadow"),l.pdialog._init(o,i),l(o).click(function(){l.pdialog.switchDialog(o)}),r.resizable&&o.jresize(),r.drawable&&o.dialogDrag(),l("a.close",o).click(function(t){return l.pdialog.close(o),!1}),r.maxable?l("a.maximize",o).show().click(function(t){return l.pdialog.switchDialog(o),l.pdialog.maxsize(o),o.jresize("destroy").dialogDrag("destroy"),!1}):l("a.maximize",o).hide(),l("a.restore",o).click(function(t){return l.pdialog.restore(o),o.jresize().dialogDrag(),!1}),r.minable?l("a.minimize",o).show().click(function(t){return l.pdialog.minimize(o),!1}):l("a.minimize",o).hide(),l("div.dialogHeader a",o).mousedown(function(){return!1}),l("div.dialogHeader",o).dblclick(function(){l("a.restore",o).is(":hidden")?l("a.maximize",o).trigger("click"):l("a.restore",o).trigger("click")}),r.max&&(l.pdialog.maxsize(o),o.jresize("destroy").dialogDrag("destroy")),l("body").data(e,o),l.pdialog._current=o,l.pdialog.attachShadow(o),(n=l(".dialogContent",o)).loadUrl(t,{},function(){n.find("[layoutH]").layoutH(n),l(".pageContent",o).width(l(o).width()-14),l("button.close").click(function(){return l.pdialog.close(o),!1})})),r.mask?(l(o).css("zIndex",1e3),l("a.minimize",o).hide(),l(o).data("mask",!0),l("#dialogBackground").show()):r.minable&&l.taskBar.addDialog(e,a)},switchDialog:function(t){"string"==typeof t&&(t=l("body").data(t));var e,a=l(t).css("zIndex");l.pdialog.attachShadow(t),l.pdialog._current&&(e=l(l.pdialog._current).css("zIndex"),l(l.pdialog._current).css("zIndex",a),l(t).css("zIndex",e),l("div.shadow").css("zIndex",e-1),l.pdialog._current=t),l.taskBar.switchTask(t.data("id"))},attachShadow:function(t){var e=l("div.shadow");e.is(":hidden")&&e.show(),e.css({top:parseInt(l(t)[0].style.top)-2,left:parseInt(l(t)[0].style.left)-4,height:parseInt(l(t).height())+8,width:parseInt(l(t).width())+8,zIndex:parseInt(l(t).css("zIndex"))-1}),l(".shadow_c",e).children().andSelf().each(function(){l(this).css("height",l(t).outerHeight()-4)})},_init:function(t,e){var a=l.extend({},this._op,e),i=a.height>a.minH?a.height:a.minH,n=a.width>a.minW?a.width:a.minW;(isNaN(t.height())||t.height()<i)&&(l(t).height(i+"px"),l(".dialogContent",t).height(i-l(".dialogHeader",t).outerHeight()-l(".dialogFooter",t).outerHeight()-6)),(isNaN(t.css("width"))||t.width()<n)&&l(t).width(n+"px");var r=(l(window).height()-t.height())/2;t.css({left:(l(window).width()-t.width())/2,top:0<r?r:0})},initResize:function(t,e,a){l("body").css("cursor",a+"-resize"),t.css({top:l(e).css("top"),left:l(e).css("left"),height:l(e).css("height"),width:l(e).css("width")}),t.show()},repaint:function(t,e){var a=l("div.shadow");"w"!=t&&"e"!=t&&(a.css("height",a.outerHeight()+e.tmove),l(".shadow_c",a).children().andSelf().each(function(){l(this).css("height",l(this).outerHeight()+e.tmove)})),"n"!=t&&"nw"!=t&&"ne"!=t||a.css("top",e.otop-2),!e.owidth||"n"==t&&"s"==t||a.css("width",e.owidth+8),0<=t.indexOf("w")&&a.css("left",e.oleft-4)},resizeTool:function(t,e,a){l("div[class^='resizable']",a).filter(function(){return"w"==l(this).attr("tar")||"e"==l(this).attr("tar")}).each(function(){l(this).css("height",l(this).outerHeight()+e)})},resizeDialog:function(t,e,a){var i,n=parseInt(t.style.left),r=parseInt(t.style.top),o=parseInt(t.style.height),s=parseInt(t.style.width);tmove="n"==a||"nw"==a?parseInt(l(e).css("top"))-r:o-parseInt(l(e).css("height")),l(e).css({left:n,width:s,top:r,height:o}),l(".dialogContent",e).css("width",s-12+"px"),l(".pageContent",e).css("width",s-14+"px"),"w"!=a&&"e"!=a&&((i=l(".dialogContent",e)).css({height:o-l(".dialogHeader",e).outerHeight()-l(".dialogFooter",e).outerHeight()-6}),i.find("[layoutH]").layoutH(i),l.pdialog.resizeTool(a,tmove,e)),l.pdialog.repaint(a,{oleft:n,otop:r,tmove:tmove,owidth:s}),l(window).trigger(DWZ.eventType.resizeGrid)},close:function(t){"string"==typeof t&&(t=l("body").data(t));var e=t.data("close");if(e&&l.isFunction(e)){var a=t.data("param");if(!(a&&""!=a?e(a=DWZ.jsonEval(a)):e()))return}l(t).hide(),l("div.shadow").hide(),l(t).data("mask")?l("#dialogBackground").hide():l(t).data("id")&&l.taskBar.closeDialog(l(t).data("id")),l("body").removeData(l(t).data("id")),l(t).trigger(DWZ.eventType.pageClear).remove()},closeCurrent:function(){this.close(l.pdialog._current)},checkTimeout:function(){var t=l(".dialogContent",l.pdialog._current),e=DWZ.jsonEval(t.html());e&&e.statusCode==DWZ.statusCode.timeout&&this.closeCurrent()},maxsize:function(t){"string"==typeof t&&(t=l("body").data(t)),l(t).data("original",{top:l(t).css("top"),left:l(t).css("left"),width:l(t).css("width"),height:l(t).css("height")}),l("a.maximize",t).hide(),l("a.restore",t).show();var e=l(window).width(),a=l(window).height()-34;l(t).css({top:"0px",left:"0px",width:e+"px",height:a+"px"}),l.pdialog._resizeContent(t,e,a)},restore:function(t){"string"==typeof t&&(t=l("body").data(t));var e=l(t).data("original"),a=parseInt(e.width),i=parseInt(e.height);l(t).css({top:e.top,left:e.left,width:a,height:i}),l.pdialog._resizeContent(t,a,i),l("a.maximize",t).show(),l("a.restore",t).hide(),l.pdialog.attachShadow(t)},minimize:function(t){"string"==typeof t&&(t=l("body").data(t)),l(t).hide(),l("div.shadow").hide();var e=l.taskBar.getTask(l(t).data("id"));l(".resizable").css({top:l(t).css("top"),left:l(t).css("left"),height:l(t).css("height"),width:l(t).css("width")}).show().animate({top:l(window).height()-60,left:e.position().left,width:e.outerWidth(),height:e.outerHeight()},250,function(){l(this).hide(),l.taskBar.inactive(l(t).data("id"))})},_resizeContent:function(t,e,a){var i=l(".dialogContent",t);i.css({width:e-12+"px",height:a-l(".dialogHeader",t).outerHeight()-l(".dialogFooter",t).outerHeight()-6}),i.find("[layoutH]").layoutH(i),l(".pageContent",t).css("width",e-14+"px"),l(window).trigger(DWZ.eventType.resizeGrid)}}}(jQuery),function(i){i.fn.dialogDrag=function(t){return"string"==typeof t&&"destroy"==t?this.each(function(){i("div.dialogHeader",this).unbind("mousedown")}):this.each(function(){var e=i(this);i("div.dialogHeader",e).mousedown(function(t){return i.pdialog.switchDialog(e),e.data("task",!0),setTimeout(function(){e.data("task")&&i.dialogDrag.start(e,t)},100),!1}).mouseup(function(t){return e.data("task",!1),!1})})},i.dialogDrag={currId:null,_init:function(t){this.currId=(new Date).getTime();var e=i("#dialogProxy");e.size()||(e=i(DWZ.frag.dialogProxy),i("body").append(e)),i("h1",e).html(i(".dialogHeader h1",t).text())},start:function(t,e){this._init(t);var a=i("#dialogProxy");return a.css({left:t.css("left"),top:t.css("top"),height:t.css("height"),width:t.css("width"),zIndex:parseInt(t.css("zIndex"))+1}).show(),i("div.dialogContent",a).css("height",i("div.dialogContent",t).css("height")),a.data("dialog",t),t.css({left:"-10000px",top:"-10000px"}),i(".shadow").hide(),i(a).jDrag({selector:".dialogHeader",stop:this.stop,event:e}),!1},stop:function(){var t=i(arguments[0]),e=t.data("dialog");i(e).css({left:i(t).css("left"),top:i(t).css("top")}),i.pdialog.attachShadow(e),i(t).hide()}}}(jQuery),function(c){var r={cursor:"move",sortBoxs:"div.sortDrag",replace:!0,items:"> *",selector:"",zIndex:1e3},d={start:function(t,e,a,i){var n=this._createPlaceholder(e),r=e.clone(),o=e.position();return r.data("$sortBox",t).data("op",i).data("$item",e).data("$placeholder",n),r.addClass("sortDragHelper").css({position:"absolute",top:o.top,left:o.left,zIndex:i.zIndex,width:e.width()+"px",height:e.height()+"px"}).jDrag({selector:i.selector,drag:this.drag,stop:this.stop,event:a}),e.before(n).before(r).hide(),!1},drag:function(){var t=c(arguments[0]),e=t.data("$sortBox"),a=t.data("$placeholder"),i=e.find(t.data("op").items).filter(":visible").filter(":not(.sortDragPlaceholder, .sortDragHelper)"),n=t.position(),r=(i.eq(0).position(),d._getOverSortBox(t));if(0<r.length&&r[0]!=e[0])a.appendTo(r),t.data("$sortBox",r);else for(var o=0;o<i.length;o++){var s=i.eq(o),l=s.position();if(n.top>l.top+10)s.after(a);else if(n.top<=l.top){s.before(a);break}}},stop:function(){var t=c(arguments[0]),e=t.data("$item"),a=t.data("$placeholder"),i=a.position();t.animate({top:i.top+"px",left:i.left+"px"},{complete:function(){t.data("op").replace&&($srcBox=e.parents(r.sortBoxs+":first"),$destBox=a.parents(r.sortBoxs+":first"),$srcBox[0]!=$destBox[0]&&($replaceItem=a.next(),0<$replaceItem.size()&&$replaceItem.insertAfter(e))),e.insertAfter(a).show(),a.remove(),t.remove()},duration:300})},_createPlaceholder:function(t){return c("<"+t[0].nodeName+' class="sortDragPlaceholder"/>').css({width:t.outerWidth()+"px",height:t.outerHeight()+"px",marginTop:t.css("marginTop"),marginRight:t.css("marginRight"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft")})},_getOverSortBox:function(t){var e=t.position(),a=e.top+t.height()/2,i=e.left+t.width()/2;return c(r.sortBoxs).filter(":visible").filter(function(){var t=c(this),e=t.position();return DWZ.isOver(a,i,e.top,e.left,t.height(),t.width())})}};c.fn.sortDrag=function(t){return this.each(function(){var i=c.extend({},r,t),n=c(this);n.attr("selector")&&(i.selector=n.attr("selector")),n.find(i.items).each(function(t){var e=c(this),a=e;i.selector&&(a=e.find(i.selector).css({cursor:i.cursor})),a.mousedown(function(t){d.start(n,e,t,i),t.preventDefault()})})})}}(jQuery),function(r){r.fn.extend({cssTable:function(t){return this.each(function(){var t=r(this),a=t.find("tbody>tr"),i=t.parent(),n=t.hasClass("nowrap");a.hoverClass("hover").each(function(t){var e=r(this);n||t%2!=1||e.addClass("trbg"),e.click(function(){a.filter(".selected").removeClass("selected"),e.addClass("selected");var t=e.attr("target");t&&(0==r("#"+t,i).size()&&i.prepend('<input id="'+t+'" type="hidden" />'),r("#"+t,i).val(e.attr("rel")))})}),t.find("thead [orderField]").orderBy({targetType:t.attr("targetType"),rel:t.attr("rel"),asc:t.attr("asc")||"asc",desc:t.attr("desc")||"desc"})})}})}(jQuery),function(_){_.fn.jTable=function(x){return this.each(function(){for(var t=_(this),n=t.attr("nowrapTD"),e=t.width(),r=[],a=t.parent().addClass("j-resizeGrid"),i=_(this).attr("layoutH"),o=t.find("thead>tr:last-child").find("th"),s=0,l=o.size();s<l;s++){var c=_(o[s]),d=[],u=c.innerWidth()-100*c.innerWidth()/e-2;d[0]=parseInt(u),d[1]=c.attr("align"),r[r.length]=d}_(this).wrap("<div class='grid'></div>");var h=t.parent().html(t.html()),p=h.find("thead");p.wrap("<div class='gridHeader'><div class='gridThead'><table style='width:"+(e-20)+"px;'></table></div></div>");var f=_(">tr:last-child",p),g=_(">th",f);_("th",p).each(function(){var t=_(this);t.html("<div class='gridCol' title='"+t.text()+"'>"+t.html()+"</div>")}),g.each(function(t){var e=_(this),a=r[t];e.addClass(a[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(a[0])}).filter("[orderField]").orderBy({targetType:t.attr("targetType"),rel:t.attr("rel"),asc:t.attr("asc")||"asc",desc:t.attr("desc")||"desc"});var v=h.find(">tbody"),m=i?" layoutH='"+i+"'":"";v.wrap("<div class='gridScroller'"+m+" style='width:"+a.width()+"px;'><div class='gridTbody'><table style='width:"+(e-20)+"px;'></table></div></div>");var b=_(">tr:first-child",v),y=v.find(">tr");y.hoverClass().each(function(){for(var e=_(this),t=_(">td",this),a=0;a<t.size();a++){var i=_(t[a]);"false"!=n&&i.html("<div>"+i.html()+"</div>"),a<r.length&&i.addClass(r[a][1])}e.click(function(){y.filter(".selected").removeClass("selected"),e.addClass("selected");var t=e.attr("target");t&&(0==_("#"+t,h).size()&&h.prepend('<input id="'+t+'" type="hidden" />'),_("#"+t,h).val(e.attr("rel")))})}),_(">td",b).each(function(t){t<r.length&&_(this).width(r[t][0])}),h.append("<div class='resizeMarker' style='height:300px; left:57px;display:none;'></div><div class='resizeProxy' style='height:300px; left:377px;display:none;'></div>");var k=_(".gridScroller",h);k.scroll(function(t){var e,a=_(".gridThead",h);return 0<k.scrollLeft()&&(a.css("position","relative"),e=k.scrollLeft(),a.css("left",k.cssv("left")-e)),0==k.scrollLeft()&&(a.css("position","relative"),a.css("left","0px")),!1}),_(">tr",p).each(function(){_(">th",this).each(function(t){var a=this,s=_(this);s.mouseover(function(t){var e=_.jTableTool.getOffset(a,t).offsetX;return s.outerWidth()-e<5?s.css("cursor","col-resize").mousedown(function(t){_(".resizeProxy",h).show().css({left:_.jTableTool.getRight(a)-_(".gridScroller",h).scrollLeft(),top:_.jTableTool.getTop(a),height:_.jTableTool.getHeight(a,h),cursor:"col-resize"}),_(".resizeMarker",h).show().css({left:_.jTableTool.getLeft(a)+1-_(".gridScroller",h).scrollLeft(),top:_.jTableTool.getTop(a),height:_.jTableTool.getHeight(a,h)}),_(".resizeProxy",h).jDrag(_.extend(x,{scop:!0,cellMinW:20,relObj:_(".resizeMarker",h)[0],move:"horizontal",event:t,stop:function(){var t=_(".resizeProxy",h).position().left-_(".resizeMarker",h).position().left-s.outerWidth()-9,e=(_.jTableTool.getColspan(s),_.jTableTool.getCellNum(s)),a=s.width(),i=s.width()+t,n=_(">td",b).eq(e-1);s.width(i+"px"),n.width(i+"px");var r=_(p).parent();r.width(r.width()-a+i+"px");var o=_(v).parent();o.width(o.width()-a+i+"px"),_(".resizeMarker,.resizeProxy",h).hide()}}))}):(s.css("cursor",s.attr("orderField")?"pointer":"default"),s.unbind("mousedown")),!1})})}),_(window).unbind(DWZ.eventType.resizeGrid).bind("resizeGrid",function _resizeGrid(){_("div.j-resizeGrid").each(function(){var t=_(this).innerWidth();t&&_("div.gridScroller",this).width(t+"px")})})})},_.jTableTool={getLeft:function(t){var e=0;return _(t).prevAll().each(function(){e+=_(this).outerWidth()}),e-1},getRight:function(t){var e=0;return _(t).prevAll().andSelf().each(function(){e+=_(this).outerWidth()}),e-1},getTop:function(t){var e=0;return _(t).parent().prevAll().each(function(){e+=_(this).outerHeight()}),e},getHeight:function(t,e){var a=0;return _(t).parent().nextAll().andSelf().each(function(){a+=_(this).outerHeight()}),_(".gridTbody",e).children().each(function(){a+=_(this).outerHeight()}),a},getCellNum:function(t){return _(t).prevAll().andSelf().size()},getColspan:function(t){return _(t).attr("colspan")||1},getStart:function(t){var e=1;return _(t).prevAll().each(function(){e+=parseInt(_(this).attr("colspan")||1)}),e},getPageCoord:function(t){for(var e={x:0,y:0};t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},getOffset:function(t,e){if(_.browser.msie){var a=_(t).offset(),i=e.pageX||e.screenX,n=e.pageY||e.screenY;return{offsetX:i-a.left,offsetY:n-a.top}}var r=e.target;null==r.offsetLeft&&(r=r.parentNode);var o=_.jTableTool.getPageCoord(r),s=window.pageXOffset+e.clientX,l=window.pageYOffset+e.clientY;return{offsetX:s-o.x,offsetY:l-o.y}}}}(jQuery),function(n){n.fn.extend({jTask:function(t){return this.each(function(){var a=n(this),i=a.attr("id");a.click(function(t){var e=n("body").data(i);return a.hasClass("selected")?n("a.minimize",e).trigger("click"):e.is(":hidden")?n.taskBar.restoreDialog(e):n(e).trigger("click"),n.taskBar.scrollCurrent(n(this)),!1}),n("div.close",a).click(function(t){return n.pdialog.close(i),!1}).hoverClass("closeHover"),a.hoverClass("hover")})}}),n.taskBar={_taskBar:null,_taskBox:null,_prevBut:null,_nextBut:null,_op:{id:"taskbar",taskBox:"div.taskbarContent",prevBut:".taskbarLeft",prevDis:"taskbarLeftDisabled",nextBut:".taskbarRight",nextDis:"taskbarRightDisabled",selected:"selected",boxMargin:"taskbarMargin"},init:function(t){var e=this;n.extend(this._op,t),this._taskBar=n("#"+this._op.id),0==this._taskBar.size()&&(this._taskBar=n(DWZ.frag.taskbar).appendTo(n("#layout")),this._taskBar.find(".taskbarLeft").hoverClass("taskbarLeftHover"),this._taskBar.find(".taskbarRight").hoverClass("taskbarRightHover")),this._taskBox=this._taskBar.find(this._op.taskBox),this._taskList=this._taskBox.find(">ul"),this._prevBut=this._taskBar.find(this._op.prevBut),this._nextBut=this._taskBar.find(this._op.nextBut),this._prevBut.click(function(t){e.scrollLeft()}),this._nextBut.click(function(t){e.scrollRight()}),this._contextmenu(this._taskBox)},_contextmenu:function(t){n(t).contextMenu("dialogCM",{bindings:{closeCurrent:function(t,e){var a=t.isTag("li")?t:n.taskBar._getCurrent();n("div.close",a).trigger("click")},closeOther:function(t,e){var a=t.isTag("li")?"#"+t.attr("id"):".selected",i=n.taskBar._taskList.find(">li:not(:"+a+")");i.each(function(t){n("div.close",i[t]).trigger("click")})},closeAll:function(t,e){var a=n.taskBar._getTasks();a.each(function(t){n("div.close",a[t]).trigger("click")})}},ctrSub:function(t,e){var a=e.find("[rel='closeCurrent']"),i=e.find("[rel='closeOther']");n.taskBar._getCurrent()[0]?1==n.taskBar._getTasks().size()&&i.addClass("disabled"):(a.addClass("disabled"),i.addClass("disabled"))}})},_scrollCurrent:function(){var t,e,a;this._tasksW(this._getTasks())>this._getTaskBarW()?(e=n(">li:last-child",(t=this)._taskList),a=this._getTaskBarW()-e.position().left-e.outerWidth(!0),this._taskList.animate({left:a+"px"},200,function(){t._ctrlScrollBut()})):this._ctrlScrollBut()},_getTaskBarW:function(){return this._taskBox.width()-(this._prevBut.is(":hidden")?this._prevBut.width()+2:0)-(this._nextBut.is(":hidden")?this._nextBut.width()+2:0)},_scrollTask:function(t){var e,a=this;t.position().left+this._getLeft()+t.outerWidth()>this._getBarWidth()?(e=this._getTaskBarW()-t.position().left-t.outerWidth(!0)-2,this._taskList.animate({left:e+"px"},200,function(){a._ctrlScrollBut()})):t.position().left+this._getLeft()<0&&(e=this._getLeft()-(t.position().left+this._getLeft()),this._taskList.animate({left:e+"px"},200,function(){a._ctrlScrollBut()}))},_ctrlScrollBut:function(){var t=this._tasksW(this._getTasks());this._getTaskBarW()>t?(this._taskBox.removeClass(this._op.boxMargin),this._nextBut.hide(),this._prevBut.hide(),this._getTasks().eq(0)[0]&&this._scrollTask(this._getTasks().eq(0))):(this._taskBox.addClass(this._op.boxMargin),this._nextBut.show().removeClass(this._op.nextDis),this._prevBut.show().removeClass(this._op.prevDis),0<=this._getLeft()&&this._prevBut.addClass(this._op.prevDis),this._getLeft()<=this._getTaskBarW()-t&&this._nextBut.addClass(this._op.nextDis))},_getLeft:function(){return this._taskList.position().left},_visibleStart:function(){for(var t=this._getLeft(),e=this._getTasks(),a=0;a<e.size();a++)if(0<=e.eq(a).position().left+e.eq(a).outerWidth(!0)+t)return e.eq(a);return e.eq(0)},_visibleEnd:function(){for(var t=this._getLeft(),e=this._getTasks(),a=0;a<e.size();a++)if(e.eq(a).position().left+e.eq(a).outerWidth(!0)+t>this._getBarWidth())return e.eq(a);return e.eq(e.size()-1)},_getTasks:function(){return this._taskList.find(">li")},_tasksW:function(t){var e=0;return t.each(function(){e+=n(this).outerWidth(!0)}),e},_getBarWidth:function(){return this._taskBar.innerWidth(!0)},addDialog:function(t,e){this.show();var a=n("#"+t,this._taskList);a[0]?n(">div>span",a).text(e):(this._taskList.append('<li id="#taskid#"><div class="taskbutton"><span>#title#</span></div><div class="close">Close</div></li>'.replace("#taskid#",t).replace("#title#",e)),(a=n("#"+t,this._taskList)).jTask()),this._contextmenu(a),this.switchTask(t),this._scrollTask(a)},closeDialog:function(t){("string"==typeof t?n("#"+t,this._taskList):t).remove(),0==this._getTasks().size()&&this.hide(),this._scrollCurrent()},restoreDialog:function(t){var e="string"==typeof t?n("body").data(t):t,a="string"==typeof t?t:e.data("id"),i=n.taskBar.getTask(a);n(".resizable").css({top:n(window).height()-60,left:n(i).position().left,height:n(i).outerHeight(),width:n(i).outerWidth()}).show().animate({top:n(e).css("top"),left:n(e).css("left"),width:n(e).css("width"),height:n(e).css("height")},250,function(){n(this).hide(),n(e).show(),n.pdialog.attachShadow(e)}),n.taskBar.switchTask(a)},inactive:function(t){n("#"+t,this._taskList).removeClass("selected")},scrollLeft:function(){var t=this._visibleStart();this._scrollTask(t)},scrollRight:function(){var t=this._visibleEnd();this._scrollTask(t)},scrollCurrent:function(t){this._scrollTask(t)},switchTask:function(t){this._getCurrent().removeClass("selected"),this.getTask(t).addClass("selected")},_getCurrent:function(){return this._taskList.find(">.selected")},getTask:function(t){return n("#"+t,this._taskList)},show:function(){this._taskBar.is(":hidden")&&(this._taskBar.css("top",n(window).height()-34+this._taskBar.outerHeight()).show(),this._taskBar.animate({top:n(window).height()-this._taskBar.outerHeight()},500))},hide:function(){this._taskBar.animate({top:n(window).height()-29+this._taskBar.outerHeight(!0)},500,function(){n.taskBar._taskBar.hide()})}}}(jQuery),$.fn.extend({ajaxTodo:function(){return this.each(function(){var i=$(this);i.click(function(t){var e=unescape(i.attr("href")).replaceTmById($(t.target).parents(".unitBox:first"));if(DWZ.debug(e),!e.isFinishedTm())return alertMsg.error(i.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var a=i.attr("title");a?alertMsg.confirm(a,{okCall:function(){ajaxTodo(e,i.attr("callback"))}}):ajaxTodo(e,i.attr("callback")),t.preventDefault()})})},dwzExport:function(){function _doExport(t){var e="dialog"==t.attr("targetType")?$.pdialog.getCurrent():navTab.getCurrentPanel(),a=$("#pagerForm",e),i=t.attr("href");window.location=i+(-1==i.indexOf("?")?"?":"&")+a.serialize()}return this.each(function(){var a=$(this);a.click(function(t){var e=a.attr("title");e?alertMsg.confirm(e,{okCall:function(){_doExport(a)}}):_doExport(a),t.preventDefault()})})}}),function(u){u.fn.extend({pagination:function(c){var d={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){for(var t=u(this),i=new h(c),e=i.getInterval(),a="",n=e.start;n<e.end;n++)a+=d.pageNumFrag.replaceAll("#pageNum#",n).replaceAll("#liClass#",n==i.getCurrentPage()?"selected j-num":"j-num");t.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",a).replaceAll("#currentPage#",i.getCurrentPage())).find("li").hoverClass();var r=t.find(d.first$),o=t.find(d.prev$),s=t.find(d.next$),l=t.find(d.last$);i.hasPrev()?(r.add(o).find(">span").hide(),_bindEvent(o,i.getCurrentPage()-1,i.targetType(),i.rel()),_bindEvent(r,1,i.targetType(),i.rel())):r.add(o).addClass("disabled").find(">a").hide(),i.hasNext()?(s.add(l).find(">span").hide(),_bindEvent(s,i.getCurrentPage()+1,i.targetType(),i.rel()),_bindEvent(l,i.numPages(),i.targetType(),i.rel())):s.add(l).addClass("disabled").find(">a").hide(),t.find(d.nums$).each(function(t){_bindEvent(u(this),t+e.start,i.targetType(),i.rel())}),t.find(d.jumpto$).each(function(){var t=u(this),a=t.find(":text"),e=t.find(":button");e.click(function(t){var e=a.val();e&&e.isPositiveInteger()&&dwzPageBreak({targetType:i.targetType(),rel:i.rel(),data:{pageNum:e}})}),a.keyup(function(t){t.keyCode==DWZ.keyCode.ENTER&&e.click()})})});function _bindEvent(t,e,a,i){t.bind("click",{pageNum:e},function(t){dwzPageBreak({targetType:a,rel:i,data:{pageNum:t.data.pageNum}}),t.preventDefault()})}},orderBy:function(t){var i=u.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},t);return this.each(function(){var a=u(this).css({cursor:"pointer"}).click(function(){var t=a.attr("orderField"),e=a.hasClass(i.asc)?i.desc:i.asc;dwzPageBreak({targetType:i.targetType,rel:i.rel,data:{orderField:t,orderDirection:e}})})})},pagerForm:function(t){var a=u.extend({pagerForm$:"#pagerForm",parentBox:document},t);return this.each(function(){var t=u(this),i=u(a.pagerForm$,a.parentBox),e=i.attr("action").replaceAll("#rel#",t.attr("action"));i.attr("action",e),t.find(":input").each(function(){var t,e=u(this),a=e.attr("name");!a||e.is(":checkbox,:radio")&&!e.is(":checked")||0==i.find(":input[name='"+a+"']").length&&(t='<input type="hidden" name="#name#" value="#value#" />'.replaceAll("#name#",a).replaceAll("#value#",e.val()),i.append(t))})})}});var h=function(t){this.opts=u.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return!1}},t)};u.extend(h.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var t=Math.ceil(this.opts.pageNumShown/2),e=this.numPages(),a=e-this.opts.pageNumShown;return{start:(this.getCurrentPage()>t?Math.max(Math.min(this.getCurrentPage()-t,a),0):0)+1,end:(this.getCurrentPage()>t?Math.min(this.getCurrentPage()+t,e):Math.min(this.opts.pageNumShown,e))+1}},getCurrentPage:function(){var t=parseInt(this.opts.currentPage);return isNaN(t)?1:t},hasPrev:function(){return 1<this.getCurrentPage()},hasNext:function(){return this.getCurrentPage()<this.numPages()}})}(jQuery),function($){var _lookup={currentGroup:"",suffix:"",$target:null,pk:"id"},_util={_lookupPrefix:function(t){var e=_lookup.currentGroup?".":"";return _lookup.currentGroup+e+t+_lookup.suffix},lookupPk:function(t){return this._lookupPrefix(t)},lookupField:function(t){return this.lookupPk(t)}};$.extend({bringBackSuggest:function(i){_lookup.$target.parents(".unitBox:first").find(":input").each(function(){var t=$(this),e=t.attr("name");for(var a in i){if((_lookup.pk==a?_util.lookupPk(a):_util.lookupField(a))==e){t.val(i[a]);break}}})},bringBack:function(t){$.bringBackSuggest(t),$.pdialog.closeCurrent()}}),$.fn.extend({lookup:function(){return this.each(function(){var $this=$(this),options={mask:!0,width:$this.attr("width")||820,height:$this.attr("height")||400,maxable:eval($this.attr("maxable")||"true"),resizable:eval($this.attr("resizable")||"true")};$this.click(function(t){_lookup=$.extend(_lookup,{currentGroup:$this.attr("lookupGroup")||"",suffix:$this.attr("suffix")||"",$target:$this,pk:$this.attr("lookupPk")||"id"});var e=unescape($this.attr("href")).replaceTmById($(t.target).parents(".unitBox:first"));return e.isFinishedTm()?$.pdialog.open(e,"_blank",$this.attr("title")||$this.text(),options):alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1})})},multLookup:function(){return this.each(function(){var e=$(this),i={};e.click(function(t){if(e.parents(".unitBox:first").find("[name='"+e.attr("multLookup")+"']").filter(":checked").each(function(){var t=DWZ.jsonEval($(this).val());for(var e in t){var a=i[e]?i[e]+",":"";i[e]=a+t[e]}}),$.isEmptyObject(i))return alertMsg.error(e.attr("warn")||DWZ.msg("alertSelectMsg")),!1;$.bringBack(i)})})},suggest:function(){var l="#suggest",a=-1;return this.each(function(){var r=$(this).attr("autocomplete","off").keydown(function(t){if(t.keyCode==DWZ.keyCode.ENTER&&$(l).is(":visible"))return!1}),s=r.attr("suggestFields").split(",");function _show(n){var t=r.offset(),e=t.top+this.offsetHeight,o=$(l);0==o.size()&&(o=$('<div id="suggest"></div>').appendTo($("body"))),o.css({left:t.left+"px",top:e+"px"}).show(),_lookup=$.extend(_lookup,{currentGroup:r.attr("lookupGroup")||"",suffix:r.attr("suffix")||"",$target:r,pk:r.attr("lookupPk")||"id"});var a=unescape(r.attr("suggestUrl")).replaceTmById($(n.target).parents(".unitBox:first"));if(!a.isFinishedTm())return alertMsg.error(r.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var i={};return i[r.attr("postField")||"inputValue"]=r.val(),$.ajax({global:!1,type:"POST",dataType:"json",url:a,cache:!1,data:i,success:function(t){if(t){var r="";$.each(t,function(t){for(var e="",a="",t=0;t<s.length;t++){var i=this[s[t]];i&&(a&&(a+="-"),a+=i)}for(var n in this)e&&(e+=","),e+=n+":'"+this[n]+"'";r+='<li lookupAttrs="'+e+'">'+a+"</li>"});var e=o.html("<ul>"+r+"</ul>").find("li");if(e.hoverClass("selected").click(function(){_select($(this))}),1==e.size()&&n.keyCode!=DWZ.keyCode.BACKSPACE)_select(e.eq(0));else if(0==e.size()){for(var a="",i=0;i<s.length&&_util.lookupField(s[i])!=n.target.name;i++)a&&(a+=","),a+=s[i]+":''";a="{"+_lookup.pk+":'',"+a+"}",$.bringBackSuggest(DWZ.jsonEval(a))}}},error:function(){o.html("")}}),$(document).bind("click",_close),!1}function _select(t){var e="{"+t.attr("lookupAttrs")+"}";$.bringBackSuggest(DWZ.jsonEval(e))}function _close(){$(l).html("").hide(),a=-1,$(document).unbind("click",_close)}r.focus(_show).click(!1).keyup(function(t){var e=$(l).find("li");switch(t.keyCode){case DWZ.keyCode.ESC:case DWZ.keyCode.TAB:case DWZ.keyCode.SHIFT:case DWZ.keyCode.HOME:case DWZ.keyCode.END:case DWZ.keyCode.LEFT:case DWZ.keyCode.RIGHT:break;case DWZ.keyCode.ENTER:_close();break;case DWZ.keyCode.DOWN:a>=e.size()-1?a=-1:a++;break;case DWZ.keyCode.UP:a<0?a=e.size()-1:a--;break;default:_show(t)}e.removeClass("selected"),0<=a&&_select(e.eq(a).addClass("selected"))})})},itemDetail:function(){return this.each(function(){var t=$(this).css("clear","both"),a=t.find("tbody"),i=[];t.find("tr:first th[type]").each(function(t){var e=$(this),a={type:e.attr("type")||"text",patternDate:e.attr("dateFmt")||"yyyy-MM-dd",name:e.attr("name")||"",defaultVal:e.attr("defaultVal")||"",size:e.attr("size")||"12",enumUrl:e.attr("enumUrl")||"",lookupGroup:e.attr("lookupGroup")||"",lookupUrl:e.attr("lookupUrl")||"",lookupPk:e.attr("lookupPk")||"id",suggestUrl:e.attr("suggestUrl"),suggestFields:e.attr("suggestFields"),postField:e.attr("postField")||"",fieldClass:e.attr("fieldClass")||"",fieldAttrs:e.attr("fieldAttrs")||""};i.push(a)}),a.find("a.btnDel").click(function(){var t=$(this);if(t.is("[href^=javascript:]"))return t.parents("tr:first").remove(),initSuffix(a),!1;function delDbData(){$.ajax({type:"POST",dataType:"json",url:t.attr("href"),cache:!1,success:function(){t.parents("tr:first").remove(),initSuffix(a)},error:DWZ.ajaxError})}return t.attr("title")?alertMsg.confirm(t.attr("title"),{okCall:delDbData}):delDbData(),!1});var e,n,r,o=t.attr("addButton")||"Add New";o&&(e=$('<div class="button"><div class="buttonContent"><button type="button">'+o+"</button></div></div>").insertBefore(t).find("button"),n=$('<input type="text" name="dwz_rowNum" class="textInput" style="margin:2px;" value="1" size="2"/>').insertBefore(t),r="",e.click(function(){r=r||function trHtml(t){var e="";return $(t).each(function(){e+=function tdHtml(t){var e="",a="";t.name.endsWith("[#index#]")?a="[#index#]":t.name.endsWith("[]")&&(a="[]");var i=a?' suffix="'+a+'" ':"",n="";if(t.fieldAttrs){var r=DWZ.jsonEval(t.fieldAttrs);for(var o in r)n+=o+'="'+r[o]+'"'}switch(t.type){case"del":e='<a href="javascript:void(0)" class="btnDel '+t.fieldClass+'">删除</a>';break;case"lookup":var s="";t.suggestFields&&(s='autocomplete="off" lookupGroup="'+t.lookupGroup+'"'+i+' suggestUrl="'+t.suggestUrl+'" suggestFields="'+t.suggestFields+'" postField="'+t.postField+'"'),e='<input type="hidden" name="'+t.lookupGroup+"."+t.lookupPk+a+'"/><input type="text" name="'+t.name+'"'+s+' lookupPk="'+t.lookupPk+'" size="'+t.size+'" class="'+t.fieldClass+'"/><a class="btnLook" href="'+t.lookupUrl+'" lookupGroup="'+t.lookupGroup+'" '+s+' lookupPk="'+t.lookupPk+'" title="查找带回">查找带回</a>';break;case"attach":e='<input type="hidden" name="'+t.lookupGroup+"."+t.lookupPk+a+'"/><input type="text" name="'+t.name+'" size="'+t.size+'" readonly="readonly" class="'+t.fieldClass+'"/><a class="btnAttach" href="'+t.lookupUrl+'" lookupGroup="'+t.lookupGroup+'" '+s+' lookupPk="'+t.lookupPk+'" width="560" height="300" title="查找带回">查找带回</a>';break;case"enum":$.ajax({type:"POST",dataType:"html",async:!1,url:t.enumUrl,data:{inputName:t.name},success:function(t){e=t}});break;case"date":e='<input type="text" name="'+t.name+'" value="'+t.defaultVal+'" class="date '+t.fieldClass+'" dateFmt="'+t.patternDate+'" size="'+t.size+'"/><a class="inputDateButton" href="javascript:void(0)">选择</a>';break;default:e='<input type="text" name="'+t.name+'" value="'+t.defaultVal+'" size="'+t.size+'" class="'+t.fieldClass+'" '+n+"/>"}return"<td>"+e+"</td>"}(this)}),'<tr class="unitBox">'+e+"</tr>"}(i);var t=1;try{t=parseInt(n.val())}catch(t){}for(var e=0;e<t;e++){$(r).appendTo(a).initUI().find("a.btnDel").click(function(){return $(this).parents("tr:first").remove(),initSuffix(a),!1})}initSuffix(a)}))});function initSuffix(t){t.find(">tr").each(function(r){$(":input, a.btnLook, a.btnAttach",this).each(function(){var t=$(this),e=t.attr("name"),a=t.val();e&&t.attr("name",e.replaceSuffix(r));var i=t.attr("lookupGroup");i&&t.attr("lookupGroup",i.replaceSuffix(r));var n=t.attr("suffix");n&&t.attr("suffix",n.replaceSuffix(r)),a&&0<=a.indexOf("#index#")&&t.val(a.replace("#index#",r+1))})})}},selectedTodo:function(){function _getIds(t,e){var a="";return("dialog"==e?$.pdialog.getCurrent():navTab.getCurrentPanel()).find("input:checked").filter("[name='"+t+"']").each(function(t){var e=$(this).val();a+=0==t?e:","+e}),a}return this.each(function(){var $this=$(this),selectedIds=$this.attr("rel")||"ids",postType=$this.attr("postType")||"map";$this.click(function(){var targetType=$this.attr("targetType"),ids=_getIds(selectedIds,targetType);if(!ids)return alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var _callback=$this.attr("callback")||("dialog"==targetType?dialogAjaxDone:navTabAjaxDone);function _doPost(){$.ajax({type:"POST",url:$this.attr("href"),dataType:"json",cache:!1,data:function(){if("map"==postType)return $.map(ids.split(","),function(t,e){return{name:selectedIds,value:t}});var t={};return t[selectedIds]=ids,t}(),success:_callback,error:DWZ.ajaxError})}$.isFunction(_callback)||(_callback=eval("("+_callback+")"));var title=$this.attr("title");return title?alertMsg.confirm(title,{okCall:_doPost}):_doPost(),!1})})}})}(jQuery),function(k){k.setRegional("datepicker",{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),k.fn.datepicker=function(u){var b={box$:"#calendar",year$:"#calendar [name=year]",month$:"#calendar [name=month]",tmInputs$:"#calendar .time :text",hour$:"#calendar .time .hh",minute$:"#calendar .time .mm",second$:"#calendar .time .ss",tmBox$:"#calendar .tm",tmUp$:"#calendar .time .up",tmDown$:"#calendar .time .down",close$:"#calendar .close",calIcon$:"a.inputDateButton",main$:"#calendar .main",days$:"#calendar .days",dayNames$:"#calendar .dayNames",clearBut$:"#calendar .clearBut",okBut$:"#calendar .okBut"};function changeTmMenu(t){var e=k(b.tmBox$);e.removeClass("hh").removeClass("mm").removeClass("ss"),t&&(e.addClass(t),k(b.tmInputs$).removeClass("slt").filter("."+t).addClass("slt"))}function clickTmMenu(e,t){k(b.tmBox$).find("."+t+" li").each(function(){var t=k(this);t.click(function(){e.val(t.text())})})}function keydownInt(t){if(!(48<=t.keyCode&&t.keyCode<=57||t.keyCode==DWZ.keyCode.DELETE||t.keyCode==DWZ.keyCode.BACKSPACE))return!1}function changeTm(t,e){var a=parseInt(t.val()),i=parseInt(t.attr("start"))||0,n=parseInt(t.attr("end")),r=parseInt(t.attr("step")||1);1==e?a<=n-r&&t.val(a+r):-1==e?i+r<=a&&t.val(a-r):n<a?t.val(n):a<i&&t.val(i)}return this.each(function(){var m=k(this);new h(m.val(),u);function generateCalendar(e){var t=e.getDateWrap(),a=e.getMinDate(),i=e.getMaxDate(),n=new Date(t.year,t.month-1,1),r=n.getDay(),o="";if(0<r){n.setMonth(n.getMonth()-1);for(var s=e.getDateWrap(n),l=s.days-r+1;l<=s.days;l++){o+='<dd class="other '+(c=a<=(d=new Date(t.year,t.month-2,l))&&d<=i?"":"disabled")+'" chMonth="-1" day="'+l+'">'+l+"</dd>"}}for(l=1;l<=t.days;l++){var c=a<=(d=new Date(t.year,t.month-1,l))&&d<=i?"":"disabled";l==t.day?o+='<dd class="slt '+c+'" day="'+l+'">'+l+"</dd>":o+='<dd class="'+c+'" day="'+l+'">'+l+"</dd>"}for(var d,l=1;l<=42-r-t.days;l++){o+='<dd class="other '+(c=a<=(d=new Date(t.year,t.month,l))&&d<=i?"":"disabled")+'" chMonth="1" day="'+l+'">'+l+"</dd>"}var u,h,p,f,g,v=k(b.days$).html(o).find("dd");v.not(".disabled").click(function(){var t=k(this);e.hasTime()?(v.removeClass("slt"),t.addClass("slt")):(m.val(e.formatDate(e.changeDay(t.attr("day"),t.attr("chMonth")))),closeCalendar())}),e.hasDate()||k(b.main$).addClass("nodate"),e.hasTime()&&(k("#calendar .time").show(),u=k(b.hour$).val(t.hour).focus(function(){changeTmMenu("hh")}),h=parseInt(t.minute/e.opts.mmStep)*e.opts.mmStep,p=k(b.minute$).val(h).attr("step",e.opts.mmStep).focus(function(){changeTmMenu("mm")}),f=k(b.second$).val(e.hasSecond()?t.second:0).attr("step",e.opts.ssStep).focus(function(){changeTmMenu("ss")}),u.add(p).add(f).click(function(){return!1}),clickTmMenu(u,"hh"),clickTmMenu(p,"mm"),clickTmMenu(f,"ss"),k(b.box$).click(function(){changeTmMenu()}),(g=k(b.tmInputs$)).keydown(keydownInt).each(function(){var t=k(this);t.keyup(function(){changeTm(t,0)})}),k(b.tmUp$).click(function(){g.filter(".slt").each(function(){changeTm(k(this),1)})}),k(b.tmDown$).click(function(){g.filter(".slt").each(function(){changeTm(k(this),-1)})}),e.hasHour()||u.attr("disabled",!0),e.hasMinute()||p.attr("disabled",!0),e.hasSecond()||f.attr("disabled",!0))}function closeCalendar(){k(b.box$).remove(),k(document).unbind("click",closeCalendar)}m.click(function(t){closeCalendar();var a=new h(m.val(),u),e=m.offset(),i=e.top+this.offsetHeight;k(DWZ.frag.calendarFrag).appendTo("body").css({left:e.left+"px",top:i+"px"}).show().click(function(t){t.stopPropagation()}),k.fn.bgiframe&&k(b.box$).bgiframe();var n="";k.each(k.regional.datepicker.dayNames,function(t,e){n+="<dt>"+e+"</dt>"}),k(b.dayNames$).html(n);var r=a.getDateWrap(),o=k(b.year$),s=a.getMinDate().getFullYear(),l=a.getMaxDate().getFullYear();for(y=s;y<=l;y++)o.append('<option value="'+y+'"'+(r.year==y?'selected="selected"':"")+">"+y+"</option>");var c=k(b.month$);k.each(k.regional.datepicker.monthNames,function(t,e){var a=t+1;c.append('<option value="'+a+'"'+(r.month==a?'selected="selected"':"")+">"+e+"</option>")}),generateCalendar(a),o.add(c).change(function(){a.changeDate(o.val(),c.val()),generateCalendar(a)});var d=k(b.box$).outerHeight(!0);return d<i&&i>k(window).height()-d&&k(b.box$).css("top",e.top-d),k(b.close$).click(function(){closeCalendar()}),k(b.clearBut$).click(function(){m.val(""),closeCalendar()}),k(b.okBut$).click(function(){var t=k(b.days$).find("dd.slt");if(t.hasClass("disabled"))return!1;var e=a.changeDay(t.attr("day"),t.attr("chMonth"));a.hasTime()&&(e.setHours(parseInt(k(b.hour$).val())),e.setMinutes(parseInt(k(b.minute$).val())),e.setSeconds(parseInt(k(b.second$).val()))),m.val(a.formatDate(e)),closeCalendar()}),k(document).bind("click",closeCalendar),!1}),m.parent().find(b.calIcon$).click(function(){return m.trigger("click"),!1})})};var h=function(t,e){this.opts=k.extend({pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},e);var a=new Date;this.opts.minDate=a.formatDateTm(this.opts.minDate),this.opts.maxDate=a.formatDateTm(this.opts.maxDate),this.sDate=t.trim()};k.extend(h.prototype,{get:function(t){return this.opts[t]},_getDays:function(t,e){return 2==e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},_minMaxDate:function(t){var e=t.split("-").length-1,a="y-M-d";return 1==e?a="y-M":0==e&&(a="y"),t.parseDate(a)},getMinDate:function(){return this._minMaxDate(this.opts.minDate)},getMaxDate:function(){var t,e=this.opts.maxDate,a=e.split("-").length-1,i=this._minMaxDate(e);return a<2&&(t=this._getDays(i.getFullYear(),i.getMonth()+1),i.setDate(t),0==a&&i.setMonth(11)),i},getDateWrap:function(t){var e=(t=t||(this.parseDate(this.sDate)||new Date)).getFullYear(),a=t.getMonth()+1,i=this._getDays(e,a);return{year:e,month:a,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:i,date:t}},changeDate:function(t,e,a){var i=new Date(t,e-1,a||1);return this.sDate=this.formatDate(i),i},changeDay:function(t,e){e=e||0;var a=this.getDateWrap();return this.changeDate(a.year,a.month+parseInt(e),t)},parseDate:function(t){return t?t.parseDate(this.opts.pattern):null},formatDate:function(t){return t.formatDate(this.opts.pattern)},hasHour:function(){return-1!=this.opts.pattern.indexOf("H")},hasMinute:function(){return-1!=this.opts.pattern.indexOf("m")},hasSecond:function(){return-1!=this.opts.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=["y","M","d","E"],e=0;e<t.length;e++)if(-1!=this.opts.pattern.indexOf(t[e]))return!0;return!1}})}(jQuery),function(o){o.extend(o.fn,{jBlindUp:function(t){var e=o.extend({duration:500,easing:"swing",call:function(){}},t);return this.each(function(){var t=o(this);o(this).animate({height:0},{step:function(){},duration:e.duration,easing:e.easing,complete:function(){t.css({display:"none"}),e.call()}})})},jBlindDown:function(t){var a=o.extend({to:0,duration:500,easing:"swing",call:function(){}},t);return this.each(function(){var t=o(this),e=0<a.to?a.to:o.effect.getDimensions(t[0]).height;t.animate({height:e},{step:function(){},duration:a.duration,easing:a.easing,complete:function(){t.css({display:""}),a.call()}})})},jSlideUp:function(t){var a=o.extend({to:0,duration:500,easing:"swing",call:function(){}},t);return this.each(function(){var t=o(this);t.wrapInner("<div></div>");var e=0<a.to?a.to:o.effect.getDimensions(o(">div",t)[0]).height;t.css({overflow:"visible",position:"relative"}),o(">div",t).css({position:"relative"}).animate({top:-e},{easing:a.easing,duration:a.duration,complete:function(){t.html(o(this).html())}})})},jSlideDown:function(t){var a=o.extend({to:0,duration:500,easing:"swing",call:function(){}},t);return this.each(function(){var t=o(this),e=0<a.to?a.to:o.effect.getDimensions(t[0]).height;t.wrapInner('<div style="top:-'+e+'px;"></div>'),t.css({overflow:"visible",position:"relative",height:"0px"}).animate({height:e},{duration:a.duration,easing:a.easing,complete:function(){t.css({display:"",overflow:""}),a.call()}}),o(">div",t).css({position:"relative"}).animate({top:0},{easing:a.easing,duration:a.duration,complete:function(){t.html(o(this).html())}})})}}),o.effect={getDimensions:function(t,e){var a=new o.effect.Rectangle,i=o(t).css("display"),n=o(t).css("visibility"),r=0==o(t).height();return o(t).is(":hidden")&&(o(t).css({visibility:"hidden",display:"block"}),r&&o(t).css("height",""),o.browser.opera&&refElement.focus()),a.height=o(t).outerHeight(),a.width=o(t).outerWidth(),"none"==i&&(o(t).css({visibility:n,display:"none"}),r&&r&&o(t).css("height","0px")),a}},o.effect.Rectangle=function(){this.width=0,this.height=0,this.unit="px"}}(jQuery),function($){$.extend($.fn,{jPanel:function(options){var op=$.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},options);return this.each(function(){var $panel=$(this),close=$panel.hasClass("close"),collapse=$panel.hasClass("collapse"),$content=$(">div",$panel).addClass(op.content),title=$(">h1",$panel).wrap('<div class="'+op.header+'"><div class="'+op.headerC+'"></div></div>');collapse&&$('<a href=""></a>').addClass(close?op.exp:op.coll).insertAfter(title);var header=$(">div:first",$panel),footer=$('<div class="'+op.footer+'"><div class="'+op.footerC+'"></div></div>').appendTo($panel),defaultH=$panel.attr("defH")?$panel.attr("defH"):0,minH=$panel.attr("minH")?$panel.attr("minH"):0,$pucker,inH,defaultH,OnToggle;close?$content.css({height:"0px",display:"none"}):0<defaultH?$content.height(defaultH+"px"):0<minH&&$content.css("minHeight",minH+"px"),collapse&&($pucker=$("a",header),inH=$content.innerHeight()-6,defaultH=0<minH&&inH<=minH?minH:inH,OnToggle=$panel.attr("OnToggle")?$panel.attr("OnToggle"):"null",$pucker.click(function(){return $pucker.hasClass(op.exp)?$content.jBlindDown({to:defaultH,call:function(){var cfun;$pucker.removeClass(op.exp).addClass(op.coll),0<minH&&$content.css("minHeight",minH+"px"),"null"!=OnToggle&&(cfun=OnToggle+"(0);",eval(cfun))}}):(0<minH&&$content.css("minHeight",""),inH<=minH&&$content.css("height",minH+"px"),$content.jBlindUp({call:function(){var cfun;$pucker.removeClass(op.coll).addClass(op.exp),"null"!=OnToggle&&(cfun=OnToggle+"(1);",eval(cfun))}})),!1}))})}})}(jQuery),function(n){n.fn.extend({checkboxCtrl:function(i){return this.each(function(){var a=n(this);a.click(function(){var t,e=a.attr("group");a.is(":checkbox")?(t=a.is(":checked")?"all":"none",e&&n.checkbox.select(e,t,i)):e&&n.checkbox.select(e,a.attr("selectType")||"all",i)})})}}),n.checkbox={selectAll:function(t,e){this.select(t,"all",e)},unSelectAll:function(t,e){this.select(t,"none",e)},selectInvert:function(t,e){this.select(t,"invert",e)},select:function(t,e,a){switch($parent=n(a||document),$checkboxLi=$parent.find(":checkbox[name='"+t+"']"),e){case"invert":$checkboxLi.each(function(){$checkbox=n(this),$checkbox.attr("checked",!$checkbox.is(":checked"))});break;case"none":$checkboxLi.attr("checked",!1);break;default:$checkboxLi.attr("checked",!0)}}}}(jQuery),function(o){o.extend({History:{_hash:new Array,_cont:void 0,_currentHash:"",_callback:void 0,init:function(t,e){o.History._cont=t,o.History._callback=e;var a,i,n=location.hash.replace(/\?.*$/,"");o.History._currentHash=n,o.browser.msie&&(""==o.History._currentHash&&(o.History._currentHash="#"),o("body").append('<iframe id="jQuery_history" style="display: none;" src="about:blank"></iframe>'),(i=(a=o("#jQuery_history")[0]).contentDocument||a.contentWindow.document).open(),i.close(),i.location.hash=n),o.isFunction(this._callback)&&o.History._callback(n.skipChar("#")),setInterval(o.History._historyCheck,100)},_historyCheck:function(){var t="";(t=o.browser.msie?o("#jQuery_history")[0].contentWindow.location.hash.skipChar("#").replace(/\?.*$/,""):location.hash.skipChar("#").replace(/\?.*$/,""))!=o.History._currentHash&&(o.History._currentHash=t,o.History.loadHistory(t))},addHistory:function(t,e,a){var i,n,r=[o.History._currentHash=t,e,a];o.History._hash.push(r),o.browser.msie&&((n=(i=o("#jQuery_history")[0]).contentDocument||i.contentWindow.document).open(),n.close(),n.location.hash=t.replace(/\?.*$/,"")),location.hash=t.replace(/\?.*$/,"")},loadHistory:function(t){o.browser.msie&&(location.hash=t);for(var e=0;e<o.History._hash.length;e+=1)if(o.History._hash[e][0]==t)return void o.History._hash[e][1](o.History._hash[e][2])}}})}(jQuery),function(d){var i=[],n=function(e){d.each(i,function(t){i[t]!=e&&(d("#"+i[t])[0]?d("#op_"+i[t]).css({height:"",width:""}).hide():d("#op_"+i[t]).remove(),d(document).unbind("click",n))})};d.extend(d.fn,{comboxSelect:function(t){var e=d.extend({selector:">a"},t);return this.each(function(){var a=d(this),t=d(e.selector,a);i.push(a.attr("id")),d(e.selector,a).click(function(){var t,e=d("#op_"+a.attr("id"));return e.is(":hidden")?(300<e.height()&&e.css({height:"300px",overflow:"scroll"}),(t=a.offset().top+a[0].offsetHeight-50)+e.height()>d(window).height()-20&&(t=d(window).height()-20-e.height()),e.css({top:t,left:a.offset().left}).show(),n(a.attr("id")),d(document).click(n)):(d(document).unbind("click",n),n()),!1}),d("#op_"+a.attr("id")).find(">li").comboxOption(t,a)})},comboxOption:function(e,a){return this.each(function(){d(">a",this).click(function(){var t=d(this);t.parent().parent().find(".selected").removeClass("selected"),t.addClass("selected"),e.text(t.text()),d("select",a).val()!=t.attr("value")&&d("select",a).val(t.attr("value")).trigger("change")})})},combox:function(){var e=[];return d.each(i,function(t){d("#"+i[t])[0]?e.push(i[t]):d("#op_"+i[t]).remove()}),i=e,this.each(function(t){var e=d(this).removeClass("combox"),a=e.attr("name"),i=e.val(),n=d("option[value="+i+"]",e).text(),r=e.attr("ref"),o=e.attr("refUrl")||"",s=e.attr("id")||Math.round(1e7*Math.random()),l='<div class="combox"><div id="combox_'+s+'" class="select"'+(r?' ref="'+r+'"':"")+">";l+='<a href="javascript:" class="'+e.attr("class")+'" name="'+a+'" value="'+i+'">'+n+"</a></div></div>";var c='<ul class="comboxop" id="op_combox_'+s+'">';function _onchange(t){var i=d("#"+r);if(0==i.size())return!1;d.ajax({type:"POST",dataType:"json",url:o.replace("{value}",encodeURIComponent(e.attr("value"))),cache:!1,data:{},success:function(e){var a,t;e&&(a="",d.each(e,function(t){e[t]&&1<e[t].length&&(a+='<option value="'+e[t][0]+'">'+e[t][1]+"</option>")}),t=i.parents("div.combox:first"),i.html(a).insertAfter(t),t.remove(),i.trigger("change").combox())},error:DWZ.ajaxError})}d("option",e).each(function(){var t=d(this);c+='<li><a class="'+(i==t[0].value?"selected":"")+'" href="#" value="'+t[0].value+'">'+t[0].text+"</a></li>"}),c+="</ul>",d("body").append(c),e.after(l),d("div.select",e.next()).comboxSelect().append(e),r&&o&&e.unbind("change",_onchange).bind("change",_onchange)})}})}(jQuery),function(n){n.printBox=function(t){var e="printBox",a=n(t?"#"+t:"body"),i=n("#"+e);0==i.size()&&(i=n('<div id="'+e+'"></div>').appendTo("body")),i.html(a.html()).find("[layoutH]").height("auto"),window.print()}}(jQuery),function(t){t.extend(t.validator.messages,{required:"必填字段",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:t.validator.format("长度最多是 {0} 的字符串"),minlength:t.validator.format("长度最少是 {0} 的字符串"),rangelength:t.validator.format("长度介于 {0} 和 {1} 之间的字符串"),range:t.validator.format("请输入一个介于 {0} 和 {1} 之间的值"),max:t.validator.format("请输入一个最大为 {0} 的值"),min:t.validator.format("请输入一个最小为 {0} 的值"),alphanumeric:"字母、数字、下划线",numeric:"请输入数字",lettersonly:"必须是字母",phone:"数字、空格、括号"}),t.setRegional("datepicker",{dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),t.setRegional("alertMsg",{title:{error:"错误",info:"提示",warn:"警告",correct:"成功",confirm:"确认提示"},butMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}})}(jQuery),window._frank={},window._frank.get=function(t){return"string"==typeof t?_frank.elementsCache[t]||(_frank.elementsCache[t]=document.getElementById(t)):"object"==typeof t?t:null},window._frank.elementsCache=[],window._frank.getComputedStyle=function(t,e){return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},window._frank.setInnerHTML=function(t,e){var a=_frank.get(t);if(/msie/.test(navigator.userAgent.toLowerCase()))return a.innerHTML=e,a;var i=a.cloneNode(!1);return i.innerHTML=e,a.parentNode.replaceChild(i,a),i},FrankCalendar.prototype._init=function(t){if(this._container=_frank.get(t),!this._container)return this.errorTip=FrankCalendar.ERRORMSG[0].replace("%id%",t),!1;"static"==_frank.getComputedStyle(this._container,"position")&&(this._container.style.position="relative"),this._createLayout(),this._bindEvent()},FrankCalendar.prototype._createLayout=function(){this._container.innerHTML=this.layout,this._container=this._container.firstChild,this.hide();for(var t=this._container.getElementsByTagName("OL")[0].getElementsByTagName("LI"),e=0;e<7;++e)_frank.setInnerHTML(t[e],FrankCalendar.i18n[this.config.lang].DAYOFWEEK[e]);this.fillDate(),this._showBottomTip(FrankCalendar.i18n[this.config.lang].DEFAULTTIP)},FrankCalendar.prototype.fillDate=function(t,e,a){var i=new Date;t&&e&&a||(t=i.getFullYear(),e=i.getMonth()+1,a=i.getDate());var n=a?new Date(t,e-1,a):new Date,r=n.getFullYear(),o=n.getMonth()+1,s=n.getDate(),l=n.getDay();this.currentYear=r,this.currentMonth=o,this.currentDate=s,this.currentDay=l;var c=this._container.getElementsByTagName("OL")[1].getElementsByTagName("LI");n.setDate(1);var d=n.getDay();n.setDate(0);for(var u=n.getDate(),h=0;h<d;++h)_frank.setInnerHTML(c[h],u-(d-h-1)),c[h].className="date-prev";2==o&&(FrankCalendar.DAYOFMONTH[1]=this._isLeapYear(r)?29:28);for(var p=FrankCalendar.DAYOFMONTH[o-1],h=0;h<p;++h)_frank.setInnerHTML(c[h+d],h+1),this.highlighted||o!=e||h+1!=s||r!=t?c[h+d].className="date-now":(c[h+d].className="date-hl",this.highlighted=!0);for(var h=d+p,f=1;c[h];++h,++f)_frank.setInnerHTML(c[h],f),c[h].className="date-next";this._showTopTip(this.currentYear+"."+this.currentMonth)},FrankCalendar.prototype._bindEvent=function(){var a=this,t=this._container.getElementsByTagName("OL")[1];t.onmouseover=function(t){var e=(t=t||window.event).srcElement||t.target;if("LI"==e.nodeName.toUpperCase()){if(-1<e.className.indexOf("date-prev"))return void a._showBottomTip(FrankCalendar.i18n[a.config.lang].PREVMONTH);if(-1<e.className.indexOf("date-next"))return void a._showBottomTip(FrankCalendar.i18n[a.config.lang].NEXTMONTH);if(-1<e.className.indexOf("date-hl"))return void a._showBottomTip(FrankCalendar.i18n[a.config.lang].TODAY);a._showBottomTip(FrankCalendar.i18n[a.config.lang].DATEFORMAT.replace("%yyyy%",a.currentYear).replace("%M%",FrankCalendar.i18n[a.config.lang].MONTHS[a.currentMonth-1]).replace("%d%",e.firstChild.nodeValue||e.innerText))}},t.onmouseout=function(t){"OL"==((t=t||window.event).srcElement||t.target).nodeName.toUpperCase()&&a._showBottomTip(FrankCalendar.i18n[a.config.lang].DEFAULTTIP)},t.onclick=function(t){var e=(t=t||window.event).srcElement||t.target;"LI"==e.nodeName.toUpperCase()&&("date-now"==e.className||"date-hl"==e.className?a._beforeDateSelected(e):"date-next"==e.className?a.fillDate(a.currentYear,a.currentMonth+1,a.currentDate):"date-prev"==e.className&&a.fillDate(a.currentYear,a.currentMonth-1,a.currentDate))};var i=this._container.getElementsByTagName("DIV")[0];i.onmouseover=function(t){var e=(t=t||window.event).srcElement||t.target;if("BUTTON"==e.nodeName.toUpperCase()){if(e===i.getElementsByTagName("BUTTON")[0])return void a._showBottomTip(FrankCalendar.i18n[a.config.lang].PREVYEAR);if(e===i.getElementsByTagName("BUTTON")[1])return void a._showBottomTip(FrankCalendar.i18n[a.config.lang].PREVMONTH);if(e===i.getElementsByTagName("BUTTON")[2])return void a._showBottomTip(FrankCalendar.i18n[a.config.lang].NEXTMONTH);if(e===i.getElementsByTagName("BUTTON")[3])return void a._showBottomTip(FrankCalendar.i18n[a.config.lang].NEXTYEAR);if(e===i.getElementsByTagName("BUTTON")[4])return void a._showBottomTip(FrankCalendar.i18n[a.config.lang].CLOSE)}},i.onclick=function(t){var e=(t=t||window.event).srcElement||t.target;"BUTTON"==e.nodeName.toUpperCase()&&(e===i.getElementsByTagName("BUTTON")[0]?a.fillDate(a.currentYear-1,a.currentMonth,a.currentDate):e===i.getElementsByTagName("BUTTON")[1]?a.fillDate(a.currentYear,a.currentMonth-1,a.currentDate):e===i.getElementsByTagName("BUTTON")[2]?a.fillDate(a.currentYear,a.currentMonth+1,a.currentDate):e===i.getElementsByTagName("BUTTON")[3]?a.fillDate(a.currentYear+1,a.currentMonth,a.currentDate):e===i.getElementsByTagName("BUTTON")[4]&&(a.hide(),a.onClosed()))}},FrankCalendar.prototype._showBottomTip=function(t){_frank.setInnerHTML(this._container.lastChild,t)},FrankCalendar.prototype._showTopTip=function(t){_frank.setInnerHTML(this._container.firstChild.getElementsByTagName("SPAN")[0],t)},FrankCalendar.prototype.show=function(){this._container.style.visibility="visible"},FrankCalendar.prototype.hide=function(){this._container.style.visibility="hidden"},FrankCalendar.prototype._beforeDateSelected=function(t){this.currentDate=+(t.firstChild.nodeValue||t.innerText),this.onDateSelected(this.currentYear,this.currentMonth,this.currentDate)},FrankCalendar.prototype.onDateSelected=function(t,e,a){},FrankCalendar.prototype.close=function(){this.hide(),this.onClosed()},FrankCalendar.prototype.onClosed=function(){},FrankCalendar.prototype._isLeapYear=function(t){return t%100==0?t%400==0:t%4==0},FrankCalendar.ERRORMSG=["can't find an element with the id %id%"],FrankCalendar.DAYOFMONTH=[31,0,31,30,31,30,31,31,30,31,30,31],FrankCalendar.i18n={"zh-CN":{DAYOFWEEK:["日","一","二","三","四","五","六"],FULLDAYOFWEEK:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],MONTHS:["1","2","3","4","5","6","7","8","9","10","11","12"],DATEFORMAT:"%yyyy%年%M%月%d%日",DEFAULTTIP:"请点击数字选择日期",PREVMONTH:"上个月",PREVYEAR:"上一年",NEXTMONTH:"下个月",NEXTYEAR:"下一年",CLOSE:"关闭",TODAY:"今天"},"en-US":{DAYOFWEEK:["S","M","T","W","T","F","S"],FULLDAYOFWEEK:["Sunday","Monday","Tuesday","wednesday","Thursday","Friday","Saturday"],MONTHS:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DATEFORMAT:"%M% %d% %yyyy%",DEFAULTTIP:"Click a number to pick a date",PREVMONTH:"last month",PREVYEAR:"last year",NEXTMONTH:"next month",NEXTYEAR:"next year",CLOSE:"close",TODAY:"today"}},FrankCalendar.prototype.layout='<div class="frk-cal-wrap"><div class="heading frk-cal-part"><button>&lt;&lt;</button><button>&lt;</button><span class="title">2011.10</span><button>&gt;</button><button>&gt;&gt;</button><button>X</button></div>',FrankCalendar.prototype.layout+='<ol class="what-day frk-clearfix frk-cal-part"><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ol>',FrankCalendar.prototype.layout+='<ol class="calendar frk-clearfix frk-cal-part"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ol>',FrankCalendar.prototype.layout+='<div class="frk-cal-part"><span></span></div></div>';
